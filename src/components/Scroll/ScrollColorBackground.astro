---
/**
 * ScrollColorBackground - GSAP-powered scroll-triggered background color changes
 *
 * This component creates a fixed background layer that smoothly transitions colors
 * as the user scrolls through sections with data-scroll-bg attributes.
 *
 * Usage:
 * 1. Add this component to your page layout
 * 2. Add data-scroll-bg="var(--color-Name-100)" to sections you want to trigger color changes
 * 3. Colors will smoothly transition as user scrolls through sections
 *
 * Features:
 * - Automatically detects sections with data-scroll-bg attributes
 * - Resolves CSS variables and OKLCH colors to RGB for smooth GSAP animations
 * - Respects a11y settings - disables animations when a11y themes/reduce-motion active
 * - Smooth bidirectional scrolling (works going up and down)
 * - Kills previous tweens to prevent animation conflicts
 *
 * Props:
 * @param initialColor - Optional initial background color (default: var(--color-Background-100))
 */

interface Props {
  initialColor?: string;
}

const { initialColor = 'var(--color-Background-100)' } = Astro.props;
---

<!-- Fixed background layer for scroll-triggered color changes -->
<div class="scroll-bg-layer" id="scroll-bg-layer"></div>

<script>
  import '../../scripts/scroll-color-background.ts';
</script>

<!-- CSS extracted to: src/styles/components/scroll-color-background.css -->
