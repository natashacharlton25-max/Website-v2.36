---
/** ColourFlowButton.astro (Token-Mapped)
 * Self-contained glassmorphic button with animated color flow effects.
 */
// Import design system tokens
import '../../styles/Glassmorphic.css';
import '../../styles/ButtonSizes.css';
import './ThemedDropdown.astro';

export interface Props {
  label?: string;
  href?: string;
  target?: string;
  variant?: 'primary' | 'secondary' | 'accent' | 'accent1' | 'accent2' | 'accent3' | 'accent4' | 'accent5' | 'inset' | 'flat' | 'depth' | 'dropdown' | 'gradient' | 'glass' | 'glow' | 'flow-left' | 'reverse' | 'outline';
  speed?: 'slow' | 'normal' | 'fast';
  disabled?: boolean;
  alignment?: 'left' | 'center';
  dropdownItems?: Array<{label: string, href?: string}>;
  shape?: 'default' | 'circle' | 'square';
  size?: 'sm' | 'md' | 'lg';
  radius?: 'sharp' | 'default' | 'soft' | 'pill';
  animatedIcon?: string;
  className?: string;
}

const {
  label = 'explore our insights',
  href = 'https://example.com',
  target = '_blank',
  variant = 'primary',
  speed = 'normal',
  disabled = false,
  alignment = 'center',
  dropdownItems = [
    {label: 'Option 1', href: '#'},
    {label: 'Option 2', href: '#'},
    {label: 'Option 3', href: '#'}
  ],
  shape = 'default',
  size = 'md',
  radius = 'default',
  animatedIcon,
  className = ''
} = Astro.props;

const isDropdown = variant === 'dropdown';
const showIcon = (shape === 'circle' || shape === 'square') && animatedIcon;
const iconPath = showIcon ? `/Animated Icons/${animatedIcon}` : '';
const shapeClass = shape !== 'default' ? `ccb-${shape}` : '';
const sizeClass = size !== 'md' ? `ccb-button--${size}` : '';
// Map radius to CSS class: sharp=ccb-sharp, soft=ccb-rounded, pill=ccb-pill, default=no class
const radiusClass = radius === 'sharp' ? 'ccb-sharp' : radius === 'soft' ? 'ccb-rounded' : radius === 'pill' ? 'ccb-pill' : '';
const classes = ['ccb-button', `ccb-button--${variant}`, `ccb-button--${speed}`, shapeClass, sizeClass, radiusClass, className, disabled ? 'ccb-button--disabled' : ''].filter(Boolean).join(' ');

// Determine color theme for ThemedDropdown based on className
const getColorTheme = () => {
  if (className.includes('ccb-button--primary')) return 'primary';
  if (className.includes('ccb-button--secondary')) return 'secondary';
  if (className.includes('ccb-button--accent1')) return 'accent1';
  if (className.includes('ccb-button--accent2')) return 'accent2';
  if (className.includes('ccb-button--accent3')) return 'accent3';
  if (className.includes('ccb-button--accent4')) return 'accent4';
  if (className.includes('ccb-button--accent5')) return 'accent5';
  return 'primary'; // default
};

const colorTheme = getColorTheme();
---

<div class={`ccb-container ccb-container--${alignment}`}>
  {isDropdown ? (
    <div class="dropdown-wrapper">
      <button
        class={`${classes} dropdown-btn`}
        disabled={disabled}
        aria-disabled={disabled}
      >
        {showIcon ? (
          <img src={iconPath} alt="" class="ccb-icon" />
        ) : (
          <slot>{label}</slot>
        )}
        <svg class="dropdown-chevron" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7 10l5 5 5-5z"/>
        </svg>
      </button>
      <ThemedDropdown
        colorTheme={colorTheme}
        dropdownItems={dropdownItems}
        borderStyle="1px solid"
        colorShade="500"
        hoverColorShade="100"
      />
    </div>
  ) : (
    <a
      class={classes}
      href={disabled ? undefined : href}
      target={disabled ? undefined : target}
      rel={disabled ? undefined : "noopener noreferrer"}
      aria-disabled={disabled}
    >
      {showIcon ? (
        <img src={iconPath} alt="" class="ccb-icon" />
      ) : (
        <slot>{label}</slot>
      )}
    </a>
  )}
</div>

<style>
  .ccb-container {
    display: flex;
    width: 100%;
  }

  .ccb-container--left {
    justify-content: flex-start;
  }

  .ccb-container--center {
    justify-content: center;
  }

  .ccb-container:has(.ccb-circle),
  .ccb-container:has(.ccb-square) {
    width: auto;
    display: inline-block;
    vertical-align: top;
  }

  .ccb-button {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--btn-size-default-padding);
    min-height: var(--btn-size-default-min-height);
    font-family: var(--font-body);
    font-size: var(--btn-size-default-font-size);
    font-weight: var(--font-weight-medium);
    text-transform: uppercase;
    text-decoration: none;
    color: var(--color-Text-700);
    background: var(--color-Neutral-200);
    border: none;
    border-radius: var(--radius-lg);
    backdrop-filter: blur(var(--glass-surface-blur));
    box-shadow: var(--shadow-btn);
    cursor: pointer;
    transition:
      background var(--transition-slow),
      box-shadow var(--transition-slow),
      color var(--transition-slow);
    overflow: hidden;
    z-index: 1;
    letter-spacing: 0.05em;
    box-sizing: border-box;
  }

  .ccb-button:before,
  .ccb-button:after {
    content: "";
    position: absolute;
    left: 50%;
    width: 160%;
    height: 200%;
    border-radius: 50%;
    display: block;
    z-index: -1;
  }

  /* Speed variants */
  .ccb-button--slow:before,
  .ccb-button--slow:after {
    transition: all 3s ease;
  }

  .ccb-button--normal:before,
  .ccb-button--normal:after {
    transition: all var(--transition-extralong);
  }

  .ccb-button--fast:before,
  .ccb-button--fast:after {
    transition: all 0.6s ease;
  }

  /* Primary variant */
  .ccb-button--primary {
    background: color-mix(in oklch, var(--color-Primary-500), transparent 90%);
    --btn-color-500: var(--color-Primary-500);
    --btn-gradient: var(--gradient-primary-light);
  }

  .ccb-button--primary:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--primary:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--color-Primary-500), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--primary:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--color-Primary-500), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--color-Primary-500), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--primary:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--color-Primary-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--primary:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--color-Primary-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--primary:active {
    background: color-mix(in oklch, var(--color-Primary-500), transparent 65%);
    color: var(--color-Primary-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Secondary variant */
  .ccb-button--secondary {
    background: color-mix(in oklch, var(--color-Secondary-500), transparent 90%);
    --btn-color-500: var(--color-Secondary-500);
    --btn-gradient: var(--gradient-secondary-light);
  }

  .ccb-button--secondary:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--secondary:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--color-Secondary-500), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--secondary:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--color-Secondary-500), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--color-Secondary-500), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--secondary:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--color-Secondary-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--secondary:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--color-Secondary-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--secondary:active {
    background: color-mix(in oklch, var(--color-Secondary-500), transparent 65%);
    color: var(--color-Secondary-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Accent variant */
  .ccb-button--accent {
    background: color-mix(in oklch, var(--color-AccentFive-500), transparent 90%);
    --btn-color-500: var(--color-AccentFive-500);
    --btn-gradient: var(--gradient-accent5-light);
  }

  .ccb-button--accent:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--accent:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--color-AccentFive-500), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--accent:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--color-AccentFive-500), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--color-AccentFive-500), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--accent:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--color-AccentFive-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--color-AccentFive-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent:active {
    background: color-mix(in oklch, var(--color-AccentFive-500), transparent 65%);
    color: var(--color-AccentFive-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Accent1 variant */
  .ccb-button--accent1 {
    background: color-mix(in oklch, var(--color-AccentOne-500), transparent 90%);
    --btn-color-500: var(--color-AccentOne-500);
    --btn-gradient: var(--gradient-accent1-light);
  }

  .ccb-button--accent1:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--accent1:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--color-AccentOne-500), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--accent1:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--color-AccentOne-500), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--color-AccentOne-500), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--accent1:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--color-AccentOne-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent1:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--color-AccentOne-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent1:active {
    background: color-mix(in oklch, var(--color-AccentOne-500), transparent 65%);
    color: var(--color-AccentOne-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Accent2 variant */
  .ccb-button--accent2 {
    background: color-mix(in oklch, var(--color-AccentTwo-500), transparent 90%);
    --btn-color-500: var(--color-AccentTwo-500);
    --btn-gradient: var(--gradient-accent2-light);
  }

  .ccb-button--accent2:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--accent2:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--color-AccentTwo-500), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--accent2:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--color-AccentTwo-500), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--color-AccentTwo-500), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--accent2:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--color-AccentTwo-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent2:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--color-AccentTwo-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent2:active {
    background: color-mix(in oklch, var(--color-AccentTwo-500), transparent 65%);
    color: var(--color-AccentTwo-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Accent3 variant */
  .ccb-button--accent3 {
    background: color-mix(in oklch, var(--color-AccentThree-500), transparent 90%);
    --btn-color-500: var(--color-AccentThree-500);
    --btn-gradient: var(--gradient-accent3-light);
  }

  .ccb-button--accent3:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--accent3:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--color-AccentThree-500), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--accent3:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--color-AccentThree-500), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--color-AccentThree-500), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--accent3:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--color-AccentThree-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent3:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--color-AccentThree-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent3:active {
    background: color-mix(in oklch, var(--color-AccentThree-500), transparent 65%);
    color: var(--color-AccentThree-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Accent4 variant */
  .ccb-button--accent4 {
    background: color-mix(in oklch, var(--color-AccentFour-500), transparent 90%);
    --btn-color-500: var(--color-AccentFour-500);
    --btn-gradient: var(--gradient-accent4-light);
  }

  .ccb-button--accent4:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--accent4:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--color-AccentFour-500), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--accent4:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--color-AccentFour-500), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--color-AccentFour-500), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--accent4:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--color-AccentFour-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent4:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--color-AccentFour-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent4:active {
    background: color-mix(in oklch, var(--color-AccentFour-500), transparent 65%);
    color: var(--color-AccentFour-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Accent5 variant */
  .ccb-button--accent5 {
    background: color-mix(in oklch, var(--color-AccentFive-500), transparent 90%);
    --btn-color-500: var(--color-AccentFive-500);
    --btn-gradient: var(--gradient-accent5-light);
  }

  .ccb-button--accent5:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--accent5:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--color-AccentFive-500), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--accent5:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--color-AccentFive-500), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--color-AccentFive-500), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--accent5:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--color-AccentFive-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent5:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--color-AccentFive-500), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--accent5:active {
    background: color-mix(in oklch, var(--color-AccentFive-500), transparent 65%);
    color: var(--color-AccentFive-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Inset variant (Neumorphic) - token-aware */
  .ccb-button--inset {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 95%);
    box-shadow:
      inset 4px 4px 8px rgba(0, 0, 0, 0.1),
      inset -4px -4px 8px rgba(255, 255, 255, 0.8),
      2px 2px 4px rgba(0, 0, 0, 0.1);
  }

  .ccb-button--inset:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--inset:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--inset:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 75%);
    box-shadow:
      inset 2px 2px 4px rgba(0, 0, 0, 0.15),
      inset -2px -2px 4px rgba(255, 255, 255, 0.7),
      0 6px 12px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%),
      0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--inset:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--inset:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--inset:active {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 65%);
    color: var(--color-Background-50);
    box-shadow:
      inset 6px 6px 12px rgba(0, 0, 0, 0.2),
      inset -6px -6px 12px rgba(255, 255, 255, 0.5);
  }

  /* Flat variant (No shadows) - token-aware */
  .ccb-button--flat {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 90%);
    box-shadow: none;
  }

  .ccb-button--flat:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--flat:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--flat:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 75%);
    box-shadow: none;
  }

  .ccb-button--flat:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--flat:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--flat:active {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 65%);
    color: var(--color-Background-50);
    box-shadow: none;
  }

  /* Depth variant (Enhanced shadows) - token-aware */
  .ccb-button--depth {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 90%);
    box-shadow:
      0 8px 16px rgba(0, 0, 0, 0.15),
      0 4px 8px rgba(0, 0, 0, 0.1),
      0 2px 4px rgba(0, 0, 0, 0.05);
  }

  .ccb-button--depth:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--depth:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--depth:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 75%);
    box-shadow:
      0 12px 24px rgba(0, 0, 0, 0.2),
      0 8px 16px rgba(0, 0, 0, 0.15),
      0 4px 8px rgba(0, 0, 0, 0.1),
      0 6px 12px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateY(-2px);
  }

  .ccb-button--depth:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--depth:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--depth:active {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 65%);
    color: var(--color-Background-50);
    box-shadow:
      0 4px 8px rgba(0, 0, 0, 0.1),
      0 2px 4px rgba(0, 0, 0, 0.05);
    transform: translateY(0);
  }

  /* Dropdown variant - token-aware */
  .ccb-button--dropdown {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 90%);
    padding-right: 2.5rem;
    position: relative;
  }

  .ccb-button--dropdown:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--dropdown:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--dropdown:hover {
    color: var(--color-Background-50);
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 75%);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--dropdown:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--dropdown:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--dropdown:active {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 65%);
    color: var(--color-Background-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Gradient variant - token-aware with animated gradient */
  .ccb-button--gradient {
    background: var(--btn-gradient, var(--gradient-hero));
    color: var(--color-Background-50);
    position: relative;
    box-shadow: var(--shadow-btn);
    transition:
      box-shadow var(--transition-extralong),
      background var(--transition-extralong),
      color var(--transition-extralong);
  }

  .ccb-button--gradient:before {
    top: 100%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 30%);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--gradient:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 20%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--gradient:hover {
    color: var(--color-Background-50);
    background: var(--btn-gradient, var(--gradient-hero));
    box-shadow:
      0 0 20px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 50%),
      0 0 40px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 60%);
  }

  .ccb-button--gradient:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 20%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--gradient:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 15%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--gradient:active {
    background: var(--btn-gradient, var(--gradient-hero));
    color: var(--color-Background-50);
    box-shadow:
      0 0 15px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 40%),
      0 0 30px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 50%);
  }

  /* Glass variant - token-aware glassmorphic with backdrop blur */
  .ccb-button--glass {
    background: var(--glass-surface-bg);
    backdrop-filter: blur(var(--glass-surface-blur));
    -webkit-backdrop-filter: blur(var(--glass-surface-blur));
  }

  .ccb-button--glass:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--glass:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--glass:hover {
    background: var(--glass-surface-bg);
    backdrop-filter: blur(var(--glass-surface-blur));
    -webkit-backdrop-filter: blur(var(--glass-surface-blur));
    color: var(--color-Background-50);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%), inset 0 0 20px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 50%);
  }

  .ccb-button--glass:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--glass:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--glass:active {
    background: var(--glass-surface-bg);
    backdrop-filter: blur(var(--glass-surface-blur));
    -webkit-backdrop-filter: blur(var(--glass-surface-blur));
    color: var(--color-Background-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Glow variant - token-aware with enhanced glow on hover */
  .ccb-button--glow {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 90%);
  }

  .ccb-button--glow:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--glow:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--glow:hover {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 75%);
    color: var(--color-Background-50);
    box-shadow: 0 6px 20px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 35%);
  }

  .ccb-button--glow:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--glow:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--glow:active {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 65%);
    color: var(--color-Background-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Flow-left variant - token-aware with animation from left */
  .ccb-button--flow-left {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 90%);
  }

  .ccb-button--flow-left:before {
    left: -200%;
    top: 50%;
    background-color: var(--color-black-t-10);
    transform: translateY(-50%) scaleX(1.25) scaleY(1.25);
  }

  .ccb-button--flow-left:after {
    left: -280%;
    top: 50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateY(-50%) scaleX(1.45) scaleY(1.45);
  }

  .ccb-button--flow-left:hover {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 75%);
    color: var(--color-Background-50);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--flow-left:hover:before {
    left: 150%;
    top: 50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateY(-50%) scaleX(1.25) scaleY(1.25);
  }

  .ccb-button--flow-left:hover:after {
    left: 250%;
    top: 50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateY(-50%) scaleX(1.45) scaleY(1.45);
  }

  .ccb-button--flow-left:active {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 65%);
    color: var(--color-Background-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Reverse variant - dark to light with animation */
  .ccb-button--reverse {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 25%);
    color: var(--color-Background-50);
  }

  .ccb-button--reverse:before {
    top: 100%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), var(--color-Background-50) 30%);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--reverse:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), var(--color-Background-50) 50%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--reverse:hover {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 25%);
    color: var(--color-Background-50);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--reverse:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), var(--color-Background-50) 50%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--reverse:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), var(--color-Background-50) 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--reverse:active {
    background: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 15%);
    color: var(--color-Background-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Outline variant - token-aware with border and animation fill */
  .ccb-button--outline {
    background: transparent;
    border: 2px solid color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 90%);
  }

  .ccb-button--outline:before {
    top: 100%;
    background-color: var(--color-black-t-10);
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
  }

  .ccb-button--outline:after {
    top: 180%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
  }

  .ccb-button--outline:hover {
    background: transparent;
    border-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 90%);
    color: var(--color-Background-50);
    box-shadow: 0 6px 12px color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%), 0 3px 6px var(--color-black-t-10);
  }

  .ccb-button--outline:hover:before {
    top: -40%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--outline:hover:after {
    top: -50%;
    background-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 70%);
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
  }

  .ccb-button--outline:active {
    background: transparent;
    border-color: color-mix(in oklch, var(--btn-color-500, var(--color-Primary-500)), transparent 85%);
    color: var(--color-Background-50);
    box-shadow: inset 2px 2px 6px var(--color-black-t-15);
  }

  /* Dropdown functionality */
  .dropdown-wrapper {
    position: relative;
    display: inline-block;
    z-index: 10;
  }

  .dropdown-wrapper .ccb-button.dropdown-btn {
    padding-right: 2.5rem;
    text-align: left;
    position: relative;
    display: flex;
    justify-content: flex-start;
    align-items: center;
  }

  .dropdown-chevron {
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    width: 1rem;
    height: 1rem;
    transition: transform 0.2s ease;
    z-index: 2;
    pointer-events: none;
  }

  .dropdown-wrapper.open .dropdown-chevron {
    transform: translateY(-50%) rotate(180deg);
  }

  /* Size variants for regular buttons */
  .ccb-button--sm:not(.ccb-circle):not(.ccb-square) {
    padding: var(--btn-size-sm-padding) !important;
    min-height: var(--btn-size-sm-min-height) !important;
    font-size: var(--btn-size-sm-font-size) !important;
  }

  .ccb-button--lg:not(.ccb-circle):not(.ccb-square) {
    padding: var(--btn-size-lg-padding) !important;
    min-height: var(--btn-size-lg-min-height) !important;
    font-size: var(--btn-size-lg-font-size) !important;
  }

  /* Shape variants - higher specificity without !important */
  .ccb-button.ccb-circle {
    border-radius: 50%;
    width: var(--btn-icon-default-size);
    height: var(--btn-icon-default-size);
    min-width: var(--btn-icon-default-size);
    max-width: var(--btn-icon-default-size);
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    flex-grow: 0;
    box-sizing: border-box;
  }

  .ccb-button.ccb-square {
    border-radius: var(--radius-sm);
    width: var(--btn-icon-default-size);
    height: var(--btn-icon-default-size);
    min-width: var(--btn-icon-default-size);
    max-width: var(--btn-icon-default-size);
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    flex-grow: 0;
    box-sizing: border-box;
  }

  /* Size variants for shapes - higher specificity */
  .ccb-button.ccb-circle.ccb-button--sm,
  .ccb-button.ccb-square.ccb-button--sm {
    width: var(--btn-icon-sm-size) !important;
    height: var(--btn-icon-sm-size) !important;
    min-width: var(--btn-icon-sm-size) !important;
    max-width: var(--btn-icon-sm-size) !important;
  }

  .ccb-button.ccb-circle.ccb-button--lg,
  .ccb-button.ccb-square.ccb-button--lg {
    width: var(--btn-icon-lg-size) !important;
    height: var(--btn-icon-lg-size) !important;
    min-width: var(--btn-icon-lg-size) !important;
    max-width: var(--btn-icon-lg-size) !important;
  }

  .ccb-icon {
    width: var(--btn-icon-size-default);
    height: var(--btn-icon-size-default);
    transition: transform var(--transition-extralong);
  }

  .ccb-button--slow .ccb-icon {
    transition: transform 3s ease;
  }

  .ccb-button--fast .ccb-icon {
    transition: transform 0.6s ease;
  }

  .ccb-button--sm .ccb-icon {
    width: var(--btn-icon-size-sm);
    height: var(--btn-icon-size-sm);
  }

  .ccb-button--lg .ccb-icon {
    width: var(--btn-icon-size-lg);
    height: var(--btn-icon-size-lg);
  }

  .ccb-circle:hover .ccb-icon,
  .ccb-square:hover .ccb-icon {
    transform: rotate(360deg) scale(1.1);
  }

  /* Corner radius options - higher specificity */
  .ccb-button.ccb-sharp {
    border-radius: 0;
  }

  .ccb-button.ccb-rounded {
    border-radius: var(--radius-xl);
  }

  .ccb-button.ccb-pill {
    border-radius: var(--radius-full);
  }

  /* Disabled state - show cursor but prevent interactions */
  .ccb-container:has(.ccb-button--disabled) {
    cursor: not-allowed;
  }

  .ccb-button.ccb-button--disabled {
    opacity: 0.5;
    pointer-events: none;
  }

  .ccb-button.ccb-button--disabled:before,
  .ccb-button.ccb-button--disabled:after {
    transition: none;
    display: none;
  }

  /* Prevent all interactions when disabled */
  .ccb-button.ccb-button--disabled:hover,
  .ccb-button.ccb-button--disabled:active,
  .ccb-button.ccb-button--disabled:focus {
    opacity: 0.5;
    transform: none;
    box-shadow: none;
    background: inherit;
    color: inherit;
  }

  /* Specifically disable dropdown functionality when disabled */
  .ccb-dropdown-wrapper:has(.ccb-button--disabled) .ccb-dropdown-menu {
    display: none;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .ccb-button {
      font-size: var(--font-size-sm);
    }
  }

  /* Reduce motion for accessibility - higher specificity */
  @media (prefers-reduced-motion: reduce) {
    .ccb-button,
    .ccb-button:before,
    .ccb-button:after,
    .ccb-icon {
      transition: none;
    }

    .ccb-button.ccb-circle:hover .ccb-icon,
    .ccb-button.ccb-square:hover .ccb-icon {
      transform: none;
    }
  }
</style>

