---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  mainImage: ImageMetadata;
  galleryImages?: ImageMetadata[];
  productName: string;
  badge?: string;
  badgeType?: string;
}

const { mainImage, galleryImages = [], productName, badge, badgeType = 'default' } = Astro.props;

// Combine into single array - use galleryImages if available, otherwise use mainImage
const allImages = galleryImages && galleryImages.length > 0
  ? galleryImages
  : [mainImage];
---

<div class="product-gallery">
  <div class="thumbnail-gallery">
    {allImages.map((img, index) => (
      <button
        class={`thumbnail ${index === 0 ? 'is-active' : 'is-inactive'}`}
        type="button"
        aria-label={`View ${productName} image ${index + 1}`}
      >
        <Image src={img} alt={`${productName} preview ${index + 1}`} />
        {index === 0 && badge && (
          <div class={`product-badge badge-${badgeType}`}>{badge}</div>
        )}
      </button>
    ))}
  </div>
</div>

<!-- CSS extracted to: src/styles/components/product-gallery.css -->
