---
/**
 * ImageTextSection - Reusable image + text section component
 *
 * Props:
 * - title: Section heading
 * - content: Array of text paragraphs or slot content
 * - image: Image import (ImageMetadata) or URL string
 * - imageAlt: Image alt text
 * - imagePosition?: 'left' | 'right' (also sets img--left or img--right class)
 * - ctaText?: CTA button text
 * - ctaHref?: CTA button link
 * - sectionId?: Unique ID for targeting specific instances in page CSS
 */

import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import Button from '../Button/Button.astro';

export interface Props {
  title: string;
  content?: string[];
  image: ImageMetadata | string;
  imageAlt: string;
  imagePosition?: 'left' | 'right';
  ctaText?: string;
  ctaHref?: string;
  sectionId?: string;
}

const {
  title,
  content = [],
  image,
  imageAlt,
  imagePosition = 'left',
  ctaText,
  ctaHref,
  sectionId
} = Astro.props;

const isImageMetadata = typeof image !== 'string';
---

<section id={sectionId} class="image-text-section section">
  <div class="container">
    <div class={`image-text-section__layout ${imagePosition === 'right' ? 'image-text-section__layout--reverse' : ''}`}>
      <!-- Image -->
      <div class="image-text-section__image">
        {isImageMetadata ? (
          <Image src={image as ImageMetadata} alt={imageAlt} class="img-default img-cover" />
        ) : (
          <img src={image as string} alt={imageAlt} class="img-default img-cover" />
        )}
      </div>

      <!-- Text Content -->
      <div class="image-text-section__content">
        <h2 class="image-text-section__title">{title}</h2>

        {content.length > 0 && (
          <div class="image-text-section__body">
            {content.map(paragraph => (
              <p set:html={paragraph}></p>
            ))}
          </div>
        )}

        <slot />

        {ctaText && ctaHref && (
          <Button href={ctaHref} variant="primary">{ctaText}</Button>
        )}
      </div>
    </div>
  </div>
</section>
<!-- Styles in: src/styles/components/image-text-section.css -->
