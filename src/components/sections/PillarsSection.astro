---
/**
 * PillarsSection - Reusable three-column pillars/features section
 *
 * Props:
 * - title: Section heading
 * - description?: Section description
 * - pillars: Array of {icon?, image?, title, description}
 */

import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

export interface Pillar {
  icon?: string; // SVG string (optional)
  image?: ImageMetadata | string; // Image import or path (optional)
  title: string;
  description: string;
}

export interface Props {
  title: string;
  description?: string;
  pillars: Pillar[];
}

const {
  title,
  description,
  pillars
} = Astro.props;
---

<section class="pillars-section section">
  <div class="container">
    <div class="pillars-section__header text-center">
      <h2 class="pillars-section__title">{title}</h2>
      {description && <p class="pillars-section__description">{description}</p>}
    </div>

    <div class="pillars-section__grid">
      {pillars.map(pillar => (
        <div class="card pillars-section__card">
          {pillar.image ? (
            <div class="image-default pillars-section__image-container">
              {typeof pillar.image !== 'string' ? (
                <Image src={pillar.image as ImageMetadata} alt={pillar.title} class="pillars-section__image" />
              ) : (
                <img src={pillar.image} alt={pillar.title} class="img-wide-md pillars-section__image" />
              )}
            </div>
          ) : pillar.icon ? (
            <div class="pillars-section__icon" set:html={pillar.icon}></div>
          ) : null}
          <h3 class="pillars-section__card-title">{pillar.title}</h3>
          <p class="pillars-section__card-description">{pillar.description}</p>
        </div>
      ))}
    </div>

    <slot />
  </div>
</section>

<!-- Styles in: src/styles/components/pillars-section.css -->
