---
/**
 * CTASection - Reusable call-to-action section component
 *
 * Props:
 * - title: CTA heading
 * - description?: CTA description/body text
 * - buttons: Array of {text, href, variant}
 * - trustSignals?: Array of {icon, value, label}
 */

import Button from '../Button/Button.astro';

export interface CTAButton {
  text: string;
  href: string;
  variant?: 'primary' | 'outline' | 'secondary';
}

export interface TrustSignal {
  icon: string; // SVG string
  value: string;
  label: string;
}

export interface Props {
  title: string;
  description?: string | string[];
  buttons: CTAButton[];
  trustSignals?: TrustSignal[];
}

const {
  title,
  description,
  buttons,
  trustSignals = []
} = Astro.props;

const descriptionArray = Array.isArray(description) ? description : description ? [description] : [];
---

<section class="cta-section section">
  <div class="container">
    <div class="cta-section__content">
      <h2 class="cta-section__title">{title}</h2>

      {descriptionArray.length > 0 && (
        <div class="cta-section__body">
          {descriptionArray.map(text => (
            <p>{text}</p>
          ))}
        </div>
      )}

      <slot />

      <div class="cta-section__buttons">
        {buttons.map(button => (
          <Button
            href={button.href}
            variant={button.variant || 'primary'}
          >
            {button.text}
          </Button>
        ))}
      </div>

      {trustSignals.length > 0 && (
        <div class="cta-section__trust-signals">
          {trustSignals.map(signal => (
            <div class="cta-section__trust-signal">
              <div class="cta-section__trust-icon" set:html={signal.icon}></div>
              <div class="cta-section__trust-text">
                <strong>{signal.value}</strong>
                <span>{signal.label}</span>
              </div>
            </div>
          ))}
        </div>
      )}
    </div>
  </div>
</section>

<!-- Styles in: src/styles/components/cta-section.css -->
