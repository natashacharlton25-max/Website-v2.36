---
/**
 * HeroMorphAnimation - Infinite looping SVG morph animation hero section
 * Tells a continuous story of growth through healing
 *
 * Script: src/scripts/hero-morph.ts
 * Styles: src/styles/components/hero-morph.css
 */

import Button from '../Button/Button.astro';
import '../../styles/components/hero-morph.css';

interface Props {
  ctaButtons?: Array<{ text: string; href: string; variant: 'primary' | 'outline' }>;
}

const { ctaButtons = [] } = Astro.props;

// Animation sequence configuration
const shapeSequence = [
  { file: '1.svg', text: "Walking With A Smile", holdTime: 2.0 },
  { file: 'circle1.svg', text: "What if healing looked different?", holdTime: 0.05 },
  { file: 'circles3.svg', text: "What if healing looked different?", holdTime: 2.0 },
  { file: '8.svg', text: "What if the hurt began to lift...", holdTime: 2.0 },
  { file: '3.svg', text: "and you saw your glow?", holdTime: 2.0 },
  { file: '4.svg', text: "What if you chose yourself?", holdTime: 2.0 },
  { file: '9.svg', text: "Gave yourself room to just be?", holdTime: 2.0 },
  { file: '7.svg', text: "and valued your worth?", holdTime: 2.0 },
  { file: '6.svg', text: "Listened to your own voice,", holdTime: 2.0 },
  { file: '2.svg', text: "and found a new path,", holdTime: 2.0 },
];
---

<section class="hero-morph">
  <div class="hero-morph__container">
    <!-- Animated Title (spans full width above everything) -->
    <div class="hero-morph__title-stage">
      <h1 class="hero-morph__title" data-morph-text></h1>
    </div>

    <!-- Left Side: Text -->
    <div class="hero-morph__content">
      <!-- Static Subtitle -->
      <p class="hero-morph__subtitle">
        Your past shaped you. It does not have to define you.<br>
        You have survived more than most people will ever fully understand. 
        And now you might be wondering if life can feel different. <br>
        Lighter, more yours.<br><br>
        <strong>YOU CAN CHOOSE.</strong><br><br>
        Not because you forget what happened, or pretend it did not matter, but because you get to choose what happens next. You get to decide what healing looks like for you. At your pace. In your way.
      </p>

      <!-- CTA Buttons -->
      {ctaButtons.length > 0 && (
        <div class="hero-morph__cta">
          {ctaButtons.map((button) => (
            <Button
              href={button.href}
              variant={button.variant}
            >
              {button.text}
            </Button>
          ))}
        </div>
      )}
    </div>

    <!-- Right Side: SVG Morph Animation -->
    <div class="hero-morph__stage">
      <div class="hero-morph__svg-container" data-morph-container>
        <!-- SVG will be injected here by JS -->
      </div>
    </div>
  </div>

  <!-- Hidden SVG storage for morph targets -->
  <div style="display: none;" data-svg-storage>
    {shapeSequence.map((shape, index) => (
      <div data-svg-index={index} data-svg-file={shape.file} data-text={shape.text} data-hold-time={shape.holdTime}></div>
    ))}
  </div>
</section>

<script>
  import '../../lib/animation/hero-morph';
</script>
