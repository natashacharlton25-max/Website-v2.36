---
/**
 * TrustBadges - Trust indicator badges using the Badge component
 *
 * Uses Phosphor icons from the 'trust' collection
 * Maps common icon names to their Phosphor equivalents
 *
 * Props:
 * @param badges - Array of badge objects with icon and text
 * @param variant - Badge variant: 'ghost' (default), 'soft', 'outline', 'fill'
 * @param size - Badge size: 'sm', 'md' (default), 'lg'
 * @param layout - Layout direction: 'column' (default), 'row'
 */
import Badge from '../Badge/Badge.astro';

type BadgeVariant = 'fill' | 'outline' | 'soft' | 'ghost';
type BadgeSize = 'sm' | 'md' | 'lg';

interface TrustBadge {
  icon: string;
  text: string;
}

interface Props {
  badges?: TrustBadge[];
  variant?: BadgeVariant;
  size?: BadgeSize;
  layout?: 'column' | 'row';
}

// Map common icon names to Phosphor fill icons in trust collection
const iconMap: Record<string, string> = {
  shield: 'shield-check-fill',
  mail: 'envelope-fill',
  check: 'seal-check-fill',
  lock: 'lock-fill',
  clock: 'clock-fill',
  heart: 'heart-fill',
  star: 'star-fill',
  verified: 'seal-check-fill',
  secure: 'lock-key-fill',
  private: 'eye-slash-fill',
  fast: 'lightning-fill',
  quality: 'medal-fill',
  guarantee: 'certificate-fill',
  support: 'lifebuoy-fill'
};

const defaultBadges: TrustBadge[] = [
  { icon: 'shield', text: 'Secure & Private' },
  { icon: 'mail', text: 'Instant Delivery' },
  { icon: 'check', text: 'No Spam Promise' }
];

const {
  badges = defaultBadges,
  variant = 'ghost',
  size = 'md',
  layout = 'column'
} = Astro.props;

// Get Phosphor icon name from map or use as-is if already a fill icon
const getIconName = (icon: string): string => {
  return iconMap[icon] || (icon.endsWith('-fill') ? icon : `${icon}-fill`);
};
---

<div class:list={['trust-badges', `trust-badges--${layout}`]}>
  {badges.map((badge) => (
    <div class="trust-badges__item">
      <Badge
        type="trust"
        label={badge.text}
        icon={getIconName(badge.icon)}
        iconCollection="trust"
        variant={variant}
        size={size}
        uppercase={false}
      />
    </div>
  ))}
</div>

<style>
  /* ========== TRUST BADGES LAYOUT ========== */
  /* Layout */
  .trust-badges {
    display: flex;
    gap: var(--space-sm);
  }

  /* Box model */
  .trust-badges {
    margin-top: var(--space-xl);
    padding-top: var(--space-xl);
  }

  /* Visual */
  .trust-badges {
    border-top: 1px solid var(--color-Neutral-200);
  }

  /* ========== LAYOUT MODIFIERS ========== */
  .trust-badges--column {
    flex-direction: column;
  }

  .trust-badges--row {
    flex-direction: row;
    flex-wrap: wrap;
  }

  /* ========== ELEMENTS ========== */
  .trust-badges__item {
    display: flex;
    align-items: center;
  }
</style>
