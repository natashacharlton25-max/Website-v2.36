---
// Bottom Navigation Component - FIXED VERSION
import ContactPopup from '../../../contact-form/Contact-Popup.astro';
---

<!-- Settings Tab -->
<div class="settings-tab" data-settings-tab>
  <!-- Expanded Settings Menu -->
  <div class="settings-expanded" data-settings-expanded>
    <!-- Contact -->
    <button class="settings-item" data-action="contact" aria-label="Contact">
      <svg class="settings-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
      </svg>
      <span class="settings-text">Contact</span>
    </button>

    <!-- Home -->
    <button class="settings-item" data-action="home" aria-label="Home">
      <svg class="settings-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
      </svg>
      <span class="settings-text">Home</span>
    </button>

    <!-- Scroll to Top -->
    <button class="settings-item" data-action="scroll-top" aria-label="Scroll to top">
      <svg class="settings-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/>
      </svg>
      <span class="settings-text">Top</span>
    </button>

    <!-- Search -->
    <button class="settings-item" data-action="search" aria-label="Search">
      <svg class="settings-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
      </svg>
      <span class="settings-text">Search</span>
    </button>
  </div>

  <!-- Menu Tab -->
  <button class="settings-toggle" data-settings-toggle aria-label="Navigation Menu">
    <span class="settings-plus">+</span>
    <span class="settings-text">Menu</span>
  </button>
</div>

<!-- Contact Popup -->
<ContactPopup />

<style>
  /* Hide bottom nav under 1400px */
  @media (max-width: 1399px) {
    .settings-tab {
      display: none !important;
    }
  }
</style>

<script>
  import { initBottomNav } from './navigation/bottomNavInit.js';

  // Initialize bottom nav - scroll behavior handled by unified navigation system
  initBottomNav();
</script>