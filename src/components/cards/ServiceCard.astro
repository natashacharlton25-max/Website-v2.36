---
// Service Card Component
// Used for displaying services, offerings, packages

export interface Props {
  icon?: string; // SVG string or emoji
  title: string;
  description: string;
  price?: number;
  priceLabel?: string; // e.g., "Starting at", "From", "Per month"
  currency?: string;
  features?: string[];
  duration?: string;
  href?: string;
  buttonText?: string;
  buttonVariant?: 'primary' | 'secondary' | 'outline';
  popular?: boolean;
  variant?: 'default' | 'bordered' | 'featured';
}

const {
  icon,
  title,
  description,
  price,
  priceLabel = 'Starting at',
  currency = 'USD',
  features = [],
  duration,
  href,
  buttonText = 'Learn More',
  buttonVariant = 'outline',
  popular = false,
  variant = 'default'
} = Astro.props;

const formattedPrice = price ? new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency: currency,
  minimumFractionDigits: 0,
}).format(price) : null;
---

<article class={`service-card service-card--${variant} ${popular ? 'service-card--popular' : ''}`}>
  {popular && (
    <div class="service-card__badge">Most Popular</div>
  )}

  {icon && (
    <div class="service-card__icon">
      <Fragment set:html={icon} />
    </div>
  )}

  <div class="service-card__content">
    <h3 class="service-card__title">{title}</h3>

    {(price || duration) && (
      <div class="service-card__pricing">
        {price && (
          <div class="service-card__price">
            <span class="service-card__price-label">{priceLabel}</span>
            <span class="service-card__price-amount">{formattedPrice}</span>
          </div>
        )}
        {duration && (
          <span class="service-card__duration">{duration}</span>
        )}
      </div>
    )}

    <p class="service-card__description">{description}</p>

    {features.length > 0 && (
      <ul class="service-card__features">
        {features.map(feature => (
          <li class="service-card__feature">
            <svg class="service-card__check" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <polyline points="20 6 9 17 4 12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            {feature}
          </li>
        ))}
      </ul>
    )}
  </div>

  {href && (
    <div class="service-card__footer">
      <a href={href} class={`btn btn-${buttonVariant} btn-block`}>
        {buttonText}
      </a>
    </div>
  )}
</article>

<style>
  .service-card {
    background: var(--color-Background-50);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: var(--shadow-sm);
    height: 100%;
    display: flex;
    flex-direction: column;
    position: relative;
    padding: var(--space-xl);
  }

  .service-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-4px);
  }

  /* Bordered variant */
  .service-card--bordered {
    border: 2px solid var(--color-Background-200);
  }

  .service-card--bordered:hover {
    border-color: var(--color-Primary-400);
  }

  /* Featured variant */
  .service-card--featured {
    background: var(--color-Primary-50);
    border: 2px solid var(--color-Primary-200);
  }

  .service-card--featured:hover {
    border-color: var(--color-Primary-400);
    background: var(--color-Primary-100);
  }

  /* Popular badge */
  .service-card--popular {
    border: 2px solid var(--color-Primary-500);
  }

  .service-card__badge {
    position: absolute;
    top: var(--space-md);
    right: var(--space-md);
    background: var(--color-Primary-600);
    color: var(--color-Background-50);
    padding: var(--space-xs) var(--space-md);
    border-radius: var(--radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .service-card__icon {
    width: var(--space-4xl);
    height: var(--space-4xl);
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-Primary-50);
    border-radius: var(--radius-md);
    color: var(--color-Primary-600);
    margin-bottom: var(--space-lg);
    flex-shrink: 0;
  }

  .service-card--featured .service-card__icon {
    background: var(--color-Primary-100);
  }

  .service-card__icon :global(svg) {
    width: var(--space-3xl);
    height: var(--space-3xl);
  }

  .service-card__content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .service-card__title {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--color-Text-900);
    margin: 0;
    line-height: 1.3;
  }

  .service-card__pricing {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  .service-card__price {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  .service-card__price-label {
    font-size: var(--text-sm);
    color: var(--color-Text-500);
    font-weight: var(--font-medium);
  }

  .service-card__price-amount {
    font-size: var(--text-4xl);
    font-weight: var(--font-bold);
    color: var(--color-Primary-700);
    line-height: 1;
  }

  .service-card__duration {
    font-size: var(--text-sm);
    color: var(--color-Text-600);
    font-weight: var(--font-medium);
  }

  .service-card__description {
    font-size: var(--text-base);
    color: var(--color-Text-600);
    line-height: 1.6;
    margin: 0;
  }

  .service-card__features {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .service-card__feature {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    font-size: var(--text-base);
    color: var(--color-Text-700);
    line-height: 1.5;
  }

  .service-card__check {
    flex-shrink: 0;
    color: var(--color-Primary-600);
    stroke-width: 2;
    margin-top: 2px;
  }

  .service-card__footer {
    padding-top: var(--space-lg);
    margin-top: auto;
  }

  .btn-block {
    width: 100%;
    justify-content: center;
  }

  /* Mobile responsive */
  @media (max-width: 768px) {
    .service-card {
      padding: var(--space-lg);
    }

    .service-card__title {
      font-size: var(--text-xl);
    }

    .service-card__price-amount {
      font-size: var(--text-3xl);
    }

    .service-card__description,
    .service-card__feature {
      font-size: var(--text-sm);
    }
  }
</style>
