---
/**
 * AccessibilityIcon - Token-aware accessibility icon component
 *
 * Renders accessibility icons with colors that respond to the token system.
 * Uses currentColor for stroke/fill so icons inherit text color from parent.
 *
 * Available icons:
 * - accessibility (person in circle)
 * - low-vision (eye with line)
 * - blind (person with cane)
 * - hearing (ear)
 * - sign-language (hands)
 * - wheelchair (wheelchair symbol)
 * - braille (braille dots)
 * - closed-caption (CC)
 * - audio-description (AD)
 * - website (globe with person)
 *
 * Usage:
 * ```astro
 * <AccessibilityIcon icon="accessibility" size={32} />
 * <AccessibilityIcon icon="low-vision" class="text-primary" />
 * ```
 */

interface Props {
  icon:
    | 'accessibility'
    | 'low-vision'
    | 'blind'
    | 'hearing'
    | 'sign-language'
    | 'wheelchair'
    | 'braille'
    | 'closed-caption'
    | 'audio-description'
    | 'website'
    | 'text-size'
    | 'contrast'
    | 'motion'
    | 'focus';
  size?: number;
  class?: string;
  ariaHidden?: boolean;
  ariaLabel?: string;
}

const {
  icon,
  size = 24,
  class: className = '',
  ariaHidden = true,
  ariaLabel
} = Astro.props;

// Icon paths - simplified versions using currentColor
const icons: Record<string, string> = {
  'accessibility': `
    <circle cx="12" cy="4.5" r="2.5" fill="currentColor"/>
    <path d="M12 7v5M8 10l4 2 4-2M9 21l2-7 2 7M8 14l-2 7M16 14l2 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
  `,
  'low-vision': `
    <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7z" stroke="currentColor" stroke-width="2" fill="none"/>
    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
    <line x1="3" y1="21" x2="21" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  `,
  'blind': `
    <circle cx="9" cy="5" r="2" fill="currentColor"/>
    <path d="M9 7v4l-4 8M9 11l3-2 6 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <path d="M14 21l-3-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
    <path d="M16 11l3 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
  `,
  'hearing': `
    <path d="M9 18c-3 0-5-2-5-5s2-5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
    <path d="M12 18c2 0 4-1.5 4-4s-2-6-4-6-4 3-4 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
    <circle cx="12" cy="14" r="2" fill="currentColor"/>
    <path d="M15 4c3 1.5 5 4.5 5 8s-2 6.5-5 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
  `,
  'sign-language': `
    <path d="M7 12l2-2 2 2 2-2 2 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <path d="M7 12v6c0 2 2 3 4 3h2c2 0 4-1 4-3v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
    <circle cx="12" cy="5" r="2" fill="currentColor"/>
  `,
  'wheelchair': `
    <circle cx="9" cy="19" r="2" stroke="currentColor" stroke-width="2" fill="none"/>
    <circle cx="17" cy="19" r="2" stroke="currentColor" stroke-width="2" fill="none"/>
    <path d="M9 17V9h6l2 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <circle cx="11" cy="5" r="2" fill="currentColor"/>
    <path d="M6 9h3" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
  `,
  'braille': `
    <circle cx="6" cy="6" r="1.5" fill="currentColor"/>
    <circle cx="6" cy="12" r="1.5" fill="currentColor"/>
    <circle cx="6" cy="18" r="1.5" fill="currentColor"/>
    <circle cx="12" cy="6" r="1.5" fill="currentColor"/>
    <circle cx="12" cy="18" r="1.5" fill="currentColor"/>
    <circle cx="18" cy="6" r="1.5" fill="currentColor"/>
    <circle cx="18" cy="12" r="1.5" fill="currentColor"/>
  `,
  'closed-caption': `
    <rect x="2" y="5" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
    <path d="M8 10c-1 0-2 .5-2 2s1 2 2 2M14 10c-1 0-2 .5-2 2s1 2 2 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
  `,
  'audio-description': `
    <rect x="2" y="5" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
    <path d="M7 15l2-6 2 6M7.5 13h3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <path d="M14 9h2c2 0 3 1.5 3 3s-1 3-3 3h-2V9z" stroke="currentColor" stroke-width="2" fill="none"/>
  `,
  'website': `
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
    <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" stroke="currentColor" stroke-width="2" fill="none"/>
  `,
  'text-size': `
    <path d="M4 7V5h16v2M9 5v14M15 5v14M7 19h4M13 19h4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
  `,
  'contrast': `
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
    <path d="M12 2a10 10 0 0 1 0 20z" fill="currentColor"/>
  `,
  'motion': `
    <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <line x1="4" y1="4" x2="20" y2="20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  `,
  'focus': `
    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
    <rect x="7" y="7" width="10" height="10" rx="1" stroke="currentColor" stroke-width="2" fill="none"/>
    <circle cx="12" cy="12" r="2" fill="currentColor"/>
  `
};

const iconPath = icons[icon] || icons['accessibility'];
---

<svg
  viewBox="0 0 24 24"
  width={size}
  height={size}
  class={`a11y-icon a11y-icon--${icon} ${className}`}
  aria-hidden={ariaHidden ? 'true' : undefined}
  aria-label={ariaLabel}
  role={ariaLabel ? 'img' : undefined}
>
  <Fragment set:html={iconPath} />
</svg>

<style>
  .a11y-icon {
    /* Inherit color from parent - fully token-aware */
    color: inherit;
    flex-shrink: 0;
    display: inline-block;
    vertical-align: middle;
  }

  /* Optional: Specific icon color overrides using tokens */
  .a11y-icon--accessibility {
    color: var(--color-Primary-500, currentColor);
  }

  .a11y-icon--contrast {
    color: var(--color-Text-800, currentColor);
  }
</style>
