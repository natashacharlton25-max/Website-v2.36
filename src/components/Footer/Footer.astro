---
/**
 * Footer - Base footer component
 * Used standalone or wrapped by FooterWithMask for canvas reveal effect
 *
 * CSS Standards Compliant:
 * - BEM-lite naming (.footer, .footer__container, .footer__section, etc)
 * - Global typography - no font overrides in component
 * - All design tokens from tokens/ folder
 * - No hardcoded values
 */
import { BRAND_CONFIG } from '../../Config/brand';
import Button from '../Button/Button.astro';

interface Props {
  variant?: 'light' | 'dark';
}

const { variant = 'dark' } = Astro.props;
---

<footer class={`footer footer--${variant}`}>
  <div class="footer__container container container-7xl">
    <!-- Footer Top -->
    <div class="footer__top">
      <!-- Brand Column -->
      <div class="footer__brand-section">
        <div class="footer__brand">
          <p class="footer__brand-name">{BRAND_CONFIG.name}</p>
        </div>
        <p class="footer__description">
          {BRAND_CONFIG.description}
        </p>
      </div>
    </div>

    <!-- Footer Bottom -->
    <div class="footer__bottom">
      <div class="footer__links">
        <Button
          href="/legal/terms"
          variant="primary"
          size="md"
          shape="rounded"
          className="footer__link-btn"
        >
          Legal
        </Button>
        <Button
          type="button"
          variant="primary"
          size="sm"
          shape="rounded"
          className="footer__link-btn"
          id="contactUsBtn"
        >
          Contact Us
        </Button>
        <Button
          type="button"
          variant="primary"
          size="sm"
          shape="rounded"
          className="footer__link-btn"
          id="cookieSettings"
        >
          Cookie Settings
        </Button>
      </div>
      <p class="footer__copyright">
        Â© {new Date().getFullYear()} <strong>{BRAND_CONFIG.name}</strong>. All rights reserved.
      </p>
    </div>
  </div>
</footer>

<style>
  /* ========== FOOTER BASE ========== */
  .footer {
    width: 100%;
    padding: var(--space-3xl) 0 var(--space-xl);
  }

  /* ========== VARIANT - DARK ========== */
  .footer--dark {
    background-color: var(--color-BackgroundDark-900);
    color: var(--color-Text-50);
  }

  .footer--dark .footer__description {
    color: var(--color-Text-400);
  }

  .footer--dark .footer__copyright {
    color: var(--color-Text-500);
  }

  .footer--dark .footer__copyright strong {
    color: var(--color-Text-300);
  }

  .footer--dark .footer__bottom {
    border-top: var(--border-width) solid var(--color-BackgroundDark-800);
  }

  /* ========== VARIANT - LIGHT ========== */
  .footer--light {
    background-color: var(--color-Background-100);
    color: var(--color-Text-700);
  }

  .footer--light .footer__description {
    color: var(--color-Text-600);
  }

  .footer--light .footer__copyright {
    color: var(--color-Text-600);
  }

  .footer--light .footer__copyright strong {
    color: var(--color-Text-700);
  }

  .footer--light .footer__bottom {
    border-top: var(--border-width) solid var(--color-Neutral-200);
  }

  /* ========== CONTAINER ========== */
  .footer__container {
    max-width: var(--container-7xl);
    margin: 0 auto;
    padding-left: var(--space-xl);
    padding-right: var(--space-xl);
  }

  /* ========== FOOTER TOP ========== */
  .footer__top {
    display: flex;
    justify-content: center;
    margin-bottom: var(--space-3xl);
  }

  .footer__brand-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    max-width: var(--container-lg);
  }

  .footer__brand {
    margin-bottom: var(--space-lg);
  }

  /* Typography inherited from global - only spacing/color overrides */
  .footer__brand-name {
    margin: 0;
  }

  .footer__description {
    line-height: var(--leading-relaxed);
    margin: 0;
  }

  /* ========== FOOTER BOTTOM ========== */
  .footer__bottom {
    padding-top: var(--space-xl);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
    text-align: center;
  }

  .footer__copyright {
    font-size: var(--text-sm);
    margin: 0;
  }

  .footer__links {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    justify-content: center;
    margin-bottom: var(--space-lg);
  }

  /* Button customization for footer context */
  .footer__link-btn {
    backdrop-filter: blur(var(--glass-surface-blur));
  }

  /* ========== RESPONSIVE ========== */
  @media (max-width: 768px) {
    .footer {
      padding: var(--space-2xl) 0 var(--space-lg);
    }

    .footer__top {
      margin-bottom: var(--space-2xl);
    }

    .footer__description {
      font-size: var(--text-sm);
      line-height: var(--leading-normal);
    }
  }

  @media (max-width: 400px) {
    .footer {
      padding: var(--space-xl) 0 var(--space-md);
    }

    .footer__top {
      margin-bottom: var(--space-lg);
    }

    .footer__brand-section {
      padding: 0 var(--space-sm);
    }

    .footer__brand-name {
      font-size: var(--text-xl);
    }

    .footer__description {
      font-size: var(--text-sm);
    }
  }

  @media (max-width: 250px) {
    .footer {
      padding: var(--space-lg) 0 var(--space-sm);
    }

    .footer__top {
      margin-bottom: var(--space-md);
    }

    .footer__brand-section {
      padding: 0 var(--space-xs);
    }

    .footer__brand-name {
      font-size: var(--text-lg);
    }

    .footer__description {
      font-size: var(--text-xs);
    }

    .footer__copyright {
      font-size: var(--text-xs);
      line-height: var(--leading-tight);
    }
  }

  /* ========== REDUCED MOTION ========== */
  @media (prefers-reduced-motion: reduce) {
    .footer__link-btn {
      transition: none;
    }
  }
</style>

<script>
  // Wait for DOM to be ready before attaching event listeners
  document.addEventListener('DOMContentLoaded', () => {
    // Contact Us button - opens contact popup
    const contactUsBtn = document.getElementById('contactUsBtn');
    if (contactUsBtn) {
      contactUsBtn.addEventListener('click', () => {
        if ((window as any).openContactPopup) {
          (window as any).openContactPopup();
        }
      });
    }

    // Cookie settings button - reopens cookie banner
    const cookieSettingsBtn = document.getElementById('cookieSettings');
    if (cookieSettingsBtn) {
      cookieSettingsBtn.addEventListener('click', () => {
        const cookieBanner = document.getElementById('cookieBanner');
        if (cookieBanner) {
          cookieBanner.classList.remove('hidden');
          cookieBanner.style.display = '';
        }
      });
    }
  });
</script>
