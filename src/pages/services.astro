---
import BaseLayout from '../Layouts/BaseLayout.astro';
import FooterWithMask from '../components/Footer/FooterWithMask.astro';
import HeroSection from '../components/Sections/HeroSection.astro';
import IntroTextSection from '../components/Sections/IntroTextSection.astro';
import CTASection from '../components/Sections/CTASection.astro';
import OfferingCard from '../components/Cards/OfferingCard.astro';
import WhyCard from '../components/Cards/WhyCard.astro';
import StepCard from '../components/Cards/StepCard.astro';

// Import offering images from src/PageImages
import offering1 from '../PageImages/Services/offering-1-resources.png';
import offering2 from '../PageImages/Services/offering-2-whitelabel.png';
import offering3 from '../PageImages/Services/offering-3-custom.png';
import offering4 from '../PageImages/Services/offering-4-training.png';

// Import data
import heroDataRaw from '../data/services/hero.json';
import introDataRaw from '../data/services/intro.json';
import offeringsDataRaw from '../data/services/offerings.json';
import whyDataRaw from '../data/services/why.json';
import howItWorksDataRaw from '../data/services/how-it-works.json';
import ctaDataRaw from '../data/services/cta.json';

// Type assertions for JSON imports
const heroData = heroDataRaw as {
  title: string;
  subtitle: string;
  description: string;
  variant: 'simple' | 'image' | 'gradient';
};

const introData = introDataRaw as {
  title: string;
  lead: string;
  subtitles: string[];
};

const offeringsData = offeringsDataRaw as Array<{
  title: string;
  description: string;
  image: string;
  suitable?: string[];
  areas?: string[];
  includes?: string[];
  includesTitle?: string;
  cta: { text: string; href: string };
}>;

const whyData = whyDataRaw as {
  title: string;
  reasons: Array<{ title: string; text: string }>;
};

const howItWorksData = howItWorksDataRaw as {
  title: string;
  steps: Array<{ number: string; title: string; text: string }>;
};

const ctaData = ctaDataRaw as {
  title: string;
  description: string;
  footer: string;
  buttons: Array<{
    text: string;
    href: string;
    variant: 'primary' | 'secondary';
  }>;
};

// Map image filenames to imported images
const offeringImages = [offering1, offering2, offering3, offering4];
const offerings = offeringsData.map((offering, index) => ({
  ...offering,
  imageObj: offeringImages[index],
}));
---

<BaseLayout
  title="Services for Professionals | Walking With A Smile"
  description="Quality resources to support the people you work with. Practical, trauma-informed tools for professionals who share our values."
  hideFooter={true}
>
  <!-- Hero Section -->
  <HeroSection
    title={heroData.title}
    subtitle={heroData.subtitle}
    description={heroData.description}
    variant={heroData.variant}
  />

  <!-- Introduction Section -->
  <section class="intro-section section">
    <div class="container container-6xl">
      <h2 class="section-title">{introData.title}</h2>
      <IntroTextSection
        lead={introData.lead}
        subtitles={introData.subtitles}
      />
    </div>
  </section>

  <!-- Offerings Section -->
  <section class="offerings-section">
    <div class="container container-6xl">
      {offerings.map((offering, index) => (
        <>
          <OfferingCard
            title={offering.title}
            description={offering.description}
            image={offering.imageObj}
            suitable={offering.suitable}
            areas={offering.areas}
            includes={offering.includes}
            includesTitle={offering.includesTitle}
            cta={offering.cta}
          />
          {index < offerings.length - 1 && <hr class="offering-divider" />}
        </>
      ))}
    </div>
  </section>

  <!-- Why Work With Us Section -->
  <section class="why-section section">
    <div class="container container-6xl">
      <h2 class="section-title">{whyData.title}</h2>
      <div class="why-grid">
        {whyData.reasons.map(reason => (
          <WhyCard
            title={reason.title}
            text={reason.text}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- How It Works Section -->
  <section class="how-section section">
    <div class="container container-6xl">
      <h2 class="section-title">{howItWorksData.title}</h2>
      <div class="steps-grid">
        {howItWorksData.steps.map(step => (
          <StepCard
            number={step.number}
            title={step.title}
            text={step.text}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <CTASection
    title={ctaData.title}
    description={ctaData.description}
    buttons={ctaData.buttons}
  >
    <p class="cta-footer">{ctaData.footer}</p>
  </CTASection>

  <!-- Footer -->
  <FooterWithMask backgroundImage="/Footer/Footer-Reveal.png" />
</BaseLayout>
