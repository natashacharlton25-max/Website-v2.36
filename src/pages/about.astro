---
import BaseLayout from '../Layouts/BaseLayout.astro';
import HeroSection from '../components/Sections/HeroSection.astro';
import IntroTextSection from '../components/Sections/IntroTextSection.astro';
import StorySection from '../components/Sections/StorySection.astro';
import ImageTextSection from '../components/Sections/ImageTextSection.astro';
import PhilosophyFlipCardsSection from '../components/Sections/PhilosophyFlipCardsSection.astro';
import ValuesSection from '../components/Sections/ValuesSection.astro';
import CTASection from '../components/Sections/CTASection.astro';
import FooterWithMask from '../components/Footer/FooterWithMask.astro';

// Image imports from src/PageImages for Astro optimization
import heroImage from '../PageImages/About/Hero/Hero.png';
import storyImage from '../PageImages/About/Story/Our-Story.png';
import purposeImage from '../PageImages/About/Purpose/What-We-Do.png';
import youFirstImage from '../PageImages/About/Philosophy/You-First.png';
import yourChoicesImage from '../PageImages/About/Philosophy/Your-Choices.png';
import actuallyWorksImage from '../PageImages/About/Philosophy/Actually-Works.png';

// Import JSON data
import heroDataRaw from '../data/about/hero.json';
import introDataRaw from '../data/about/introduction.json';
import storyDataRaw from '../data/about/story.json';
import purposeDataRaw from '../data/about/purpose.json';
import philosophyDataRaw from '../data/about/philosophy.json';
import valuesDataRaw from '../data/about/values.json';
import finalCTADataRaw from '../data/about/final-cta.json';

// Type assertions
const heroData = heroDataRaw as {
  title: string;
  subtitle: string;
  image: string;
  imageAlt: string;
  imagePosition: 'full';
};

const introData = introDataRaw as {
  lead: string;
  subtitles: string[];
};

const storyData = storyDataRaw as {
  title: string;
  image: string;
  imageAlt: string;
  content: string[];
};

const purposeData = purposeDataRaw as {
  title: string;
  content: string[];
  image: string;
  imageAlt: string;
  imagePosition: 'left';
};

const philosophyData = philosophyDataRaw as typeof philosophyDataRaw;
const valuesData = valuesDataRaw as typeof valuesDataRaw;

const finalCTAData = finalCTADataRaw as {
  title: string;
  content: string[];
  buttons: Array<{ text: string; href: string; variant: 'primary' | 'secondary' }>;
};

// Map philosophy pillar images
const philosophyImages = [youFirstImage, yourChoicesImage, actuallyWorksImage];
---

<BaseLayout
  title="About | Walking With A Smile"
  description="We've walked parts of this journey too. Learn about our story and why we created Walking with a Smile."
  hideFooter={true}
>
  <!-- Hero with Full-Width Image -->
  <HeroSection
    title={heroData.title}
    subtitle={heroData.subtitle}
    variant="image"
    image={heroImage}
    imageAlt={heroData.imageAlt}
    imagePosition={heroData.imagePosition}
  />

  <!-- Introduction -->
  <IntroTextSection
    lead={introData.lead}
    subtitles={introData.subtitles}
  />

  <!-- Our Story -->
  <StorySection
    title={storyData.title}
    image={storyImage}
    imageAlt={storyData.imageAlt}
    content={storyData.content}
  />

  <!-- What We're Here To Do -->
  <ImageTextSection
    title={purposeData.title}
    content={purposeData.content}
    image={purposeImage}
    imageAlt={purposeData.imageAlt}
    imagePosition={purposeData.imagePosition}
  />

  <!-- How We See Things - Philosophy Flip Cards -->
  <PhilosophyFlipCardsSection
    title={philosophyData.title}
    intro={philosophyData.intro}
    pillars={philosophyData.pillars}
    pillarImages={philosophyImages}
  />

  <!-- What Matters To Us - Values -->
  <ValuesSection
    title={valuesData.title}
    values={valuesData.values}
  />

  <!-- What This Means For You - Final CTA -->
  <CTASection
    title={finalCTAData.title}
    description={finalCTAData.content}
    buttons={finalCTAData.buttons}
  />

  <!-- Footer with Interactive Mask -->
  <FooterWithMask />
</BaseLayout>
