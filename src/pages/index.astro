---
import BaseLayout from '../Layouts/BaseLayout.astro';
import HeroMorphAnimation from '../components/Sections/HeroMorphAnimation.astro';
import ImageTextSection from '../components/Sections/ImageTextSection.astro';
import PillarsSection from '../components/Sections/PillarsSection.astro';
import WhoSliderSection from '../components/Sections/WhoSliderSection.astro';
import CTASection from '../components/Sections/CTASection.astro';
import FooterWithMask from '../components/Footer/FooterWithMask.astro';

// Image imports from src/PageImages for Astro optimization
import bridgeImage from '../PageImages/Home/Bridge/Bridge.png';
import approachImage from '../PageImages/Home/Approach/Our Approach.png';
import pillar1Image from '../PageImages/Home/Pillars/Pillar-1.png';
import pillar2Image from '../PageImages/Home/Pillars/Pillar-2.png';
import pillar3Image from '../PageImages/Home/Pillars/Pillar-3.png';
import sliderTitleImage from '../PageImages/Home/Who/Slider-Title.png';
import slider1Image from '../PageImages/Home/Who/Slider-1.png';
import slider2Image from '../PageImages/Home/Who/Slider-2.png';
import slider3Image from '../PageImages/Home/Who/Slider-3.png';
import slider4Image from '../PageImages/Home/Who/Slider-4.png';
import slider5Image from '../PageImages/Home/Who/Slider-5.png';
import slider6Image from '../PageImages/Home/Who/Slider-6.png';

// Import JSON data
import heroDataRaw from '../data/home/hero.json';
import bridgeDataRaw from '../data/home/bridge.json';
import pillarsDataRaw from '../data/home/pillars.json';
import whoSliderDataRaw from '../data/home/who-slider.json';
import approachDataRaw from '../data/home/approach.json';
import ctaDataRaw from '../data/home/cta.json';

// Type assertions for proper typing
const heroData = heroDataRaw as { buttons: Array<{ text: string; href: string; variant: 'primary' | 'outline' }> };
const bridgeData = bridgeDataRaw as {
  title: string;
  content: string[];
  image: string;
  imageAlt: string;
  imagePosition: 'left' | 'right';
  ctaText: string;
  ctaHref: string;
};
const pillarsData = pillarsDataRaw as typeof pillarsDataRaw;
const whoSliderData = whoSliderDataRaw as typeof whoSliderDataRaw;
const approachData = approachDataRaw as {
  title: string;
  content: string[];
  image: string;
  imageAlt: string;
  imagePosition: 'left' | 'right';
  ctaText: string;
  ctaHref: string;
};
const ctaData = ctaDataRaw as { title: string; description: string[]; buttons: Array<{ text: string; href: string; variant: 'primary' | 'outline' }> };

// Map pillar images
const pillarImages = [pillar1Image, pillar2Image, pillar3Image];
const pillarsWithImages = pillarsData.pillars.map((pillar, index) => ({
  ...pillar,
  image: pillarImages[index]
}));

// Map who slider images
const whoSliderImages = [slider1Image, slider2Image, slider3Image, slider4Image, slider5Image, slider6Image];
---

<BaseLayout
  title="Walking With A Smile | Your past shaped you. It doesn't have to define you."
  description="Support for trauma recovery and healing. Practical resources to help you move from survival to living, at your own pace."
  hideFooter={true}
>
  <!-- Hero Section with Morphing SVG Animation -->
  <HeroMorphAnimation
    ctaButtons={heroData.buttons}
  />

  <!-- The Bridge Section -->
  <ImageTextSection
    title={bridgeData.title}
    content={bridgeData.content}
    image={bridgeImage}
    imageAlt={bridgeData.imageAlt}
    imagePosition={bridgeData.imagePosition}
    ctaText={bridgeData.ctaText}
    ctaHref={bridgeData.ctaHref}
  />

  <!-- What We Offer Section -->
  <PillarsSection
    title={pillarsData.title}
    description={pillarsData.description}
    pillars={pillarsWithImages}
  />

  <!-- Who This Is For Section -->
  <WhoSliderSection
    title={whoSliderData.title}
    subtitle={whoSliderData.subtitle}
    titleImage={sliderTitleImage}
    slides={whoSliderData.slides}
    slideImages={whoSliderImages}
  />

  <!-- Our Approach Section -->
  <ImageTextSection
    title={approachData.title}
    content={approachData.content}
    image={approachImage}
    imageAlt={approachData.imageAlt}
    imagePosition={approachData.imagePosition}
    ctaText={approachData.ctaText}
    ctaHref={approachData.ctaHref}
  />

  <!-- Final CTA -->
  <CTASection
    title={ctaData.title}
    description={ctaData.description}
    buttons={ctaData.buttons}
  />

  <!-- Footer with Interactive Mask -->
  <FooterWithMask />
</BaseLayout>
