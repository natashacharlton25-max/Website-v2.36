---
import BaseLayout from '../../layouts/BaseLayout.astro';
import UnifiedButton from '../../components/Buttons/UnifiedButton.astro';
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';

// Generate static paths from content collection
export async function getStaticPaths() {
  const assetEntries = await getCollection('assets');

  return assetEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry }
  }));
}

const { entry } = Astro.props;
const asset = entry.data;
const slug = entry.slug;

// Fallback if asset not found
if (!asset) {
  return Astro.redirect('/assets');
}

// Map asset data to product structure for template compatibility
const product = {
  id: slug,
  name: asset.name,
  slug: slug,
  category: asset.category,
  type: asset.type,
  sku: asset.sku,
  description: asset.description,
  longDescription: asset.longDescription || `<p>${asset.description}</p>`,
  features: asset.features || [],
  fileSize: asset.fileSize,
  pageCount: asset.pageCount,
  downloadPath: asset.downloadUrl,
  professionalGuidePath: asset.professionalGuideUrl,
  // Images from content collection (optimized by Astro)
  cardImage: asset.cardImage,
  galleryImages: asset.galleryImages || [],
  // Tab content
  forIndividuals: asset.forIndividuals,
  forProfessionals: asset.forProfessionals,
  specifications: asset.specifications,
  highlights: asset.highlights,
};

// Get all assets for related products
const allAssets = await getCollection('assets');

// Get related products (same type, excluding current)
const relatedProducts = allAssets
  .filter(a => a.data.type === asset.type && a.slug !== slug)
  .slice(0, 2)
  .map(a => ({
    id: a.slug,
    name: a.data.name,
    slug: a.slug,
    category: a.data.category,
    type: a.data.type,
    description: a.data.description,
    cardImage: a.data.cardImage,
  }));
---

<BaseLayout
  title={`${product.name} | Walking With A Smile`}
  description={product.description}
>
  <!-- Breadcrumbs -->
  <section class="breadcrumbs-section bg-alt">
    <div class="container container-7xl">
      <nav class="breadcrumbs">
        <a href="/">Home</a>
        <span class="separator">›</span>
        <a href="/assets">Tools</a>
        <span class="separator">›</span>
        <span class="current">{product.name}</span>
      </nav>
    </div>
  </section>

  <!-- Product Details -->
  <section class="product-detail-section section bg-alt">
    <div class="container container-7xl">
      <div class="product-layout">
        <!-- Left Column: Image -->
        <div class="product-gallery">
          <div class="main-image">
            {/* Use first gallery image (portrait) as main, fallback to card image */}
            <Image
              src={product.galleryImages && product.galleryImages.length > 0 ? product.galleryImages[0] : product.cardImage}
              alt={product.name}
              id="main-product-image"
            />
            <div class={`product-badge badge-${product.type}`}>{product.category}</div>
          </div>

          <!-- Thumbnail Gallery -->
          {product.galleryImages && product.galleryImages.length > 0 && (
            <div class="thumbnail-gallery">
              {product.galleryImages.map((img, index) => (
                <button
                  class={`thumbnail ${index === 0 ? 'active' : ''}`}
                  data-image={img.src}
                  type="button"
                >
                  <Image src={img} alt={`${product.name} preview ${index + 1}`} />
                </button>
              ))}
            </div>
          )}
        </div>

        <!-- Right Column: Product Info -->
        <div class="product-details">
          <div class="product-header">
            <div class="product-category">{product.category}</div>
            <h1 class="product-title">{product.name}</h1>

            <!-- SKU -->
            {product.sku && (
              <div class="product-sku">
                SKU: {product.sku}
              </div>
            )}

            <!-- Price -->
            <div class="product-pricing">
              <span class="price-current">Free</span>
            </div>

            <!-- Description -->
            <p class="product-description">{product.description}</p>

            <!-- Cart Note -->
            <p class="cart-note-inline">
              Email required for download link.<br />
              No payment needed.<br />
              We believe healing should be unconditional.
            </p>
          </div>

          <!-- Product Info Row -->
          <div class="product-info-row">
            <div class="info-item-inline">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
              </svg>
              <span>PDF</span>
            </div>
            <span class="separator">•</span>
            <div class="info-item-inline">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
              </svg>
              <span>{product.fileSize || '36 MB'}</span>
            </div>
            <span class="separator">•</span>
            <div class="info-item-inline">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10 9 9 9 8 9"></polyline>
              </svg>
              <span>{product.pageCount || 28} pages</span>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <!-- Add to Cart Button -->
            <div
              class="cart-btn-wrapper add-to-cart-btn-product"
              data-product-id={product.id}
              data-product-name={product.name}
              data-product-price="0"
              data-product-image={product.cardImage.src}
            >
              <UnifiedButton variant="primary" size="md" className="cart-button-full">
                Add PDF
              </UnifiedButton>
            </div>

            <!-- Professional Guide Button -->
            {product.professionalGuidePath && (
              <div
                class="cart-btn-wrapper add-to-cart-btn-product"
                data-product-id={`${product.id}-guide`}
                data-product-name={`${product.name} - Guidance Notes`}
                data-product-price="0"
                data-product-image={product.cardImage.src}
              >
                <UnifiedButton variant="secondary" size="md" className="cart-button-full">
                  Add Professional Guide
                </UnifiedButton>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Product Content - Tabbed -->
  <section class="product-content-section section-sm bg-alt">
    <div class="container container-7xl">
      <div class="content-wrapper">
        <!-- Modern Switcher Navigation -->
        <div class="switcher-container">
          <div class="switcher-nav">
            <button class="switcher-btn active" data-tab="description">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
              </svg>
              <span>Description</span>
            </button>
            <button class="switcher-btn" data-tab="specification">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="9" y1="9" x2="15" y2="9"></line>
                <line x1="9" y1="15" x2="15" y2="15"></line>
              </svg>
              <span>Specification</span>
            </button>
            <button class="switcher-btn" data-tab="individuals">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
              <span>For Individuals</span>
            </button>
            <button class="switcher-btn" data-tab="professionals">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
              </svg>
              <span>For Professionals</span>
            </button>
          </div>
        </div>

        <!-- Tab Content -->
        <div class="tabs-content">
          <!-- Description Tab -->
          <div class="tab-panel active" data-panel="description">
            <h2>About This {product.category}</h2>
            <div set:html={product.longDescription} />
          </div>

          <!-- Specification Tab -->
          <div class="tab-panel" data-panel="specification">
            <div class="spec-masonry">
              {/* Dynamic specifications from content collection */}
              {product.specifications && product.specifications.length > 0 && (
                product.specifications.map((spec, index) => {
                  const colorVariants = ['accent', 'primary', 'secondary'];
                  const colorClass = colorVariants[index % colorVariants.length];
                  return (
                    <div class={`spec-card spec-card--${colorClass}`}>
                      <div class="spec-card__icon">
                        {spec.icon ? (
                          <iconify-icon icon={spec.icon} width="24" height="24"></iconify-icon>
                        ) : (
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="12"></line>
                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                          </svg>
                        )}
                      </div>
                      <div class="spec-card__content">
                        <span class="spec-card__label">{spec.label}</span>
                        <span class="spec-card__value">{spec.value}</span>
                      </div>
                    </div>
                  );
                })
              )}

              {/* Dynamic highlights from content collection - text-only feature cards */}
              {product.highlights && product.highlights.length > 0 && (
                product.highlights.map((highlight, index) => {
                  const colorVariants = ['secondary', 'accent', 'primary'];
                  const colorClass = colorVariants[index % colorVariants.length];
                  return (
                    <div class={`spec-card spec-card--highlight spec-card--${colorClass}`}>
                      <div class="spec-card__icon">
                        {highlight.icon ? (
                          <iconify-icon icon={highlight.icon} width="24" height="24"></iconify-icon>
                        ) : (
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                          </svg>
                        )}
                      </div>
                      <div class="spec-card__content">
                        <span class="spec-card__text">{highlight.text}</span>
                      </div>
                    </div>
                  );
                })
              )}

              {/* Fallback: Show basic specs if no specifications OR highlights defined */}
              {(!product.specifications || product.specifications.length === 0) && (!product.highlights || product.highlights.length === 0) && (
                <>
                  {/* Fallback: Show basic specs from product data */}
                  <div class="spec-card spec-card--accent">
                    <div class="spec-card__icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                      </svg>
                    </div>
                    <div class="spec-card__content">
                      <span class="spec-card__label">Format</span>
                      <span class="spec-card__value">PDF</span>
                    </div>
                  </div>

                  <div class="spec-card spec-card--primary">
                    <div class="spec-card__icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                      </svg>
                    </div>
                    <div class="spec-card__content">
                      <span class="spec-card__label">Type</span>
                      <span class="spec-card__value">{product.category}</span>
                    </div>
                  </div>

                  {product.pageCount && (
                    <div class="spec-card spec-card--secondary">
                      <div class="spec-card__icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                          <polyline points="14 2 14 8 20 8"></polyline>
                          <line x1="16" y1="13" x2="8" y2="13"></line>
                          <line x1="16" y1="17" x2="8" y2="17"></line>
                        </svg>
                      </div>
                      <div class="spec-card__content">
                        <span class="spec-card__label">Pages</span>
                        <span class="spec-card__value">{product.pageCount}</span>
                      </div>
                    </div>
                  )}

                  {product.fileSize && (
                    <div class="spec-card spec-card--accent">
                      <div class="spec-card__icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                          <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                          <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                          <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                        </svg>
                      </div>
                      <div class="spec-card__content">
                        <span class="spec-card__label">File Size</span>
                        <span class="spec-card__value">{product.fileSize}</span>
                      </div>
                    </div>
                  )}

                  <div class="spec-card spec-card--primary">
                    <div class="spec-card__icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"></line>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                      </svg>
                    </div>
                    <div class="spec-card__content">
                      <span class="spec-card__label">Price</span>
                      <span class="spec-card__value">Free</span>
                    </div>
                  </div>

                  <div class="spec-card spec-card--secondary">
                    <div class="spec-card__icon">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                      </svg>
                    </div>
                    <div class="spec-card__content">
                      <span class="spec-card__label">Download</span>
                      <span class="spec-card__value">Instant</span>
                    </div>
                  </div>
                </>
              )}
            </div>
          </div>

          <!-- For Individuals Tab -->
          <div class="tab-panel" data-panel="individuals">
            <h2>For Individuals</h2>
            {product.forIndividuals ? (
              <>
                {product.forIndividuals.overview && (
                  <div set:html={product.forIndividuals.overview} />
                )}

                {product.forIndividuals.howToUse && product.forIndividuals.howToUse.length > 0 && (
                  <>
                    <h3>How to Use</h3>
                    <ul class="simple-list">
                      {product.forIndividuals.howToUse.map(step => (
                        <li>{step}</li>
                      ))}
                    </ul>
                  </>
                )}

                {product.forIndividuals.whenToUse && product.forIndividuals.whenToUse.length > 0 && (
                  <>
                    <h3>When to Use This</h3>
                    <ul class="simple-list">
                      {product.forIndividuals.whenToUse.map(situation => (
                        <li>{situation}</li>
                      ))}
                    </ul>
                  </>
                )}

                {product.forIndividuals.tips && product.forIndividuals.tips.length > 0 && (
                  <>
                    <h3>Tips</h3>
                    <ul class="simple-list">
                      {product.forIndividuals.tips.map(tip => (
                        <li>{tip}</li>
                      ))}
                    </ul>
                  </>
                )}
              </>
            ) : (
              <p>This resource is designed to support your personal wellbeing journey. Take what resonates and leave what doesn't.</p>
            )}
          </div>

          <!-- For Professionals Tab -->
          <div class="tab-panel" data-panel="professionals">
            <h2>For Professionals</h2>
            {product.forProfessionals ? (
              <>
                {product.forProfessionals.clinicalContext && (
                  <>
                    <h3>Clinical Context</h3>
                    <div set:html={product.forProfessionals.clinicalContext} />
                  </>
                )}

                {product.forProfessionals.intendedUse && (
                  <>
                    <h3>Intended Use</h3>
                    <div set:html={product.forProfessionals.intendedUse} />
                  </>
                )}

                {product.forProfessionals.therapeuticApproach && (
                  <>
                    <h3>Therapeutic Approach</h3>
                    <div set:html={product.forProfessionals.therapeuticApproach} />
                  </>
                )}

                {product.forProfessionals.evidenceBase && product.forProfessionals.evidenceBase.length > 0 && (
                  <>
                    <h3>Evidence Base</h3>
                    <ul class="simple-list">
                      {product.forProfessionals.evidenceBase.map(evidence => (
                        <li>{evidence}</li>
                      ))}
                    </ul>
                  </>
                )}

                {product.forProfessionals.adaptations && product.forProfessionals.adaptations.length > 0 && (
                  <>
                    <h3>Adaptations</h3>
                    <ul class="simple-list">
                      {product.forProfessionals.adaptations.map(adaptation => (
                        <li>{adaptation}</li>
                      ))}
                    </ul>
                  </>
                )}

                {product.forProfessionals.sessionIntegration && (
                  <>
                    <h3>Session Integration</h3>
                    <div set:html={product.forProfessionals.sessionIntegration} />
                  </>
                )}
              </>
            ) : (
              <p>Professional guidance notes are available for this resource. Contact us for more information about using this in therapeutic or clinical settings.</p>
            )}

            {product.professionalGuidePath && (
              <p class="conclusion-text">A companion Professional Guide is available (via the "Add Professional Guide" button above) providing detailed implementation strategies, evidence-based context, and therapeutic applications.</p>
            )}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Related Products -->
  {relatedProducts.length > 0 && (
    <section class="related-products-section section bg-alt">
      <div class="container container-7xl">
        <h2 class="section-title">Recommended for You</h2>
        <div class="related-grid">
          {relatedProducts.map(relatedProduct => (
            <a href={`/assets/${relatedProduct.slug}`} class="compact-tool-card">
              <div class="compact-card-header">
                <span class="compact-category">{relatedProduct.category}</span>
                <span class="compact-arrow">+</span>
              </div>
              <h3 class="compact-title">{relatedProduct.name}</h3>
              <p class="compact-description">{relatedProduct.description}</p>
            </a>
          ))}
        </div>
      </div>
    </section>
  )}
</BaseLayout>

<script>
  // Add to cart (for free download) - handle all add-to-cart buttons
  const addToCartWrappers = document.querySelectorAll('.add-to-cart-btn-product');
  addToCartWrappers.forEach(wrapper => {
    if (wrapper) {
      // Listen for clicks on the wrapper and its children
      wrapper.addEventListener('click', (e) => {
        const wrapperEl = e.currentTarget as HTMLElement;
        const productData = {
          id: wrapperEl.dataset.productId,
          name: wrapperEl.dataset.productName,
          price: parseFloat(wrapperEl.dataset.productPrice || '0'),
          image: wrapperEl.dataset.productImage
        };

        // Use the global addToCart function from MiniCart
        if ((window as any).addToCart) {
          (window as any).addToCart(productData);
        } else {
          console.warn('Cart system not initialized');
        }
      });
    }
  });

  // Elastic Tab/Switcher functionality
  const tabButtons = document.querySelectorAll('.switcher-btn');
  const tabPanels = document.querySelectorAll('.tab-panel');
  const switcherNav = document.querySelector('.switcher-nav') as HTMLElement;

  // Function to update selector position
  function updateSelector(activeButton: HTMLElement) {
    if (!switcherNav) return;

    const activeWidth = activeButton.offsetWidth;
    const activeLeft = activeButton.offsetLeft;

    // Update CSS custom properties for the selector
    switcherNav.style.setProperty('--selector-width', `${activeWidth}px`);
    switcherNav.style.setProperty('--selector-left', `${activeLeft}px`);
  }

  // Initialize selector on page load
  const activeButton = document.querySelector('.switcher-btn.active') as HTMLElement;
  if (activeButton && switcherNav) {
    updateSelector(activeButton);
  }

  // Handle tab clicks
  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      const targetTab = (button as HTMLElement).dataset.tab;

      // Remove active class from all buttons and panels
      tabButtons.forEach(btn => btn.classList.remove('active'));
      tabPanels.forEach(panel => panel.classList.remove('active'));

      // Add active class to clicked button and corresponding panel
      button.classList.add('active');
      updateSelector(button as HTMLElement);

      const targetPanel = document.querySelector(`.tab-panel[data-panel="${targetTab}"]`);
      if (targetPanel) {
        targetPanel.classList.add('active');
      }
    });
  });

  // Thumbnail gallery functionality
  const thumbnails = document.querySelectorAll('.thumbnail');
  const mainImage = document.getElementById('main-product-image') as HTMLImageElement;

  thumbnails.forEach(thumbnail => {
    thumbnail.addEventListener('click', () => {
      const imageUrl = (thumbnail as HTMLElement).dataset.image;

      if (imageUrl && mainImage) {
        // Update main image
        mainImage.src = imageUrl;

        // Update active state
        thumbnails.forEach(t => t.classList.remove('active'));
        thumbnail.classList.add('active');
      }
    });
  });
</script>

<style>
  /* Breadcrumbs */
  .breadcrumbs-section {
    padding: var(--space-lg) 0;
    /* Background handled by .bg-alt class */
  }

  .breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-sm);
    font-family: var(--font-body);
    flex-wrap: wrap;
  }

  .breadcrumbs a {
    color: var(--color-Text-600);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  .breadcrumbs a:hover {
    color: var(--color-Primary-500);
  }

  .breadcrumbs .separator {
    color: var(--color-Text-500);
  }

  .breadcrumbs .current {
    color: var(--color-Text-700);
    font-weight: var(--font-semibold);
  }

  /* Product Layout */
  .product-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-3xl);
  }

  /* Gallery */
  .product-gallery {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  .main-image {
    width: 100%;
    max-width: 500px;
    aspect-ratio: 5 / 7;
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    background: var(--color-Background-50);
    position: relative;
    box-shadow: var(--shadow-lg);
    border: 2px solid var(--color-Primary-200);
    padding: var(--space-md);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .main-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: var(--border-radius-md);
  }

  .product-badge {
    position: absolute;
    top: var(--space-md);
    left: var(--space-md);
    padding: var(--space-xs) var(--space-sm);
    color: white;
    font-size: var(--text-xs);
    font-weight: var(--font-bold);
    border-radius: var(--border-radius-sm);
    text-transform: uppercase;
  }

  .product-badge.badge-worksheet {
    background: var(--color-Primary-600);
  }

  .product-badge.badge-workbook {
    background: var(--color-Secondary-600);
  }

  .product-badge.badge-guide {
    background: var(--color-AccentOne-600);
  }

  .product-badge.badge-toolkit {
    background: var(--color-AccentTwo-600);
  }

  /* Thumbnail Gallery */
  .thumbnail-gallery {
    display: flex;
    gap: var(--space-md);
    margin-top: var(--space-lg);
    justify-content: center;
    flex-wrap: wrap;
  }

  .thumbnail {
    width: 80px;
    aspect-ratio: 5 / 7;
    border-radius: var(--border-radius-md);
    overflow: hidden;
    background: var(--color-Background-50);
    border: 2px solid var(--color-Primary-200);
    box-shadow: var(--shadow-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
    padding: 0;
  }

  .thumbnail:hover {
    border-color: var(--color-Primary-500);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .thumbnail.active {
    border-color: var(--color-Primary-600);
    box-shadow: var(--shadow-md);
  }

  .thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  /* Product Details */
  .product-header {
    margin-bottom: var(--space-2xl);
  }

  .product-category {
    font-size: var(--text-sm);
    font-family: var(--font-body);
    color: var(--color-Primary-600);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    margin-bottom: var(--space-sm);
  }

  .product-title {
    font-size: var(--text-4xl);
    font-family: var(--font-heading);
    font-weight: var(--font-bold);
    color: var(--color-Text-700);
    line-height: var(--leading-tight);
    margin-bottom: var(--space-md);
  }

  /* Product Info Row */
  .product-info-row {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-sm);
    color: var(--color-Text-600);
    margin-bottom: var(--space-lg);
    flex-wrap: wrap;
  }

  .product-info-row .separator {
    display: none;
  }

  .info-item-inline {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-xs) var(--space-md);
    border: 2px solid var(--color-Primary-600);
    border-radius: var(--border-radius-full);
    background: transparent;
    transition: all var(--transition-fast);
  }

  .info-item-inline:hover {
    background: var(--color-Primary-50);
  }

  .info-item-inline svg {
    color: var(--color-Primary-600);
    flex-shrink: 0;
  }

  .info-item-inline span {
    color: var(--color-Primary-600);
    font-weight: var(--font-semibold);
  }

  /* SKU */
  .product-sku {
    font-size: var(--text-xs);
    color: var(--color-Text-500);
    margin-bottom: var(--space-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .product-pricing {
    display: flex;
    align-items: baseline;
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
  }

  .price-current {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--color-Primary-600);
  }

  .product-description {
    font-size: var(--text-lg);
    font-family: var(--font-body);
    color: var(--color-Text-600);
    line-height: var(--leading-relaxed);
  }

  /* Download Section */
  .download-section {
    padding: var(--space-xl);
    margin-bottom: var(--space-xl);
    background: var(--color-AccentOne-200);
    border: none;
  }

  .download-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    margin-bottom: var(--space-xl);
  }

  .info-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    color: var(--color-Text-700);
    font-size: var(--text-sm);
  }

  .info-item svg {
    color: var(--color-Primary-600);
    flex-shrink: 0;
  }

  .btn-block {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
  }

  .download-note {
    text-align: center;
    font-size: var(--text-sm);
    color: var(--color-Text-600);
    margin-top: var(--space-md);
    margin-bottom: 0;
  }

  /* Action Buttons Container */
  .action-buttons {
    display: flex;
    gap: var(--space-md);
    flex-wrap: wrap;
    margin-top: var(--space-xl);
  }

  /* Cart Button Wrapper */
  .cart-btn-wrapper {
    flex: 1;
    min-width: 200px;
    cursor: pointer;
  }

  /* Make UnifiedButton fill the wrapper */
  .cart-btn-wrapper :global(.unified-btn),
  .cart-btn-wrapper :global(.unified-btn button) {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-md);
  }

  .cart-btn-wrapper :global(.cart-button-full) {
    width: 100%;
  }

  /* Stack buttons vertically on mobile */
  @media (max-width: 768px) {
    .action-buttons {
      flex-direction: column;
      gap: var(--space-sm);
    }

    .cart-btn-wrapper {
      width: 100%;
      min-width: auto;
    }

    .cart-btn-wrapper :global(.unified-btn button) {
      font-size: var(--text-sm);
      padding: var(--space-sm) var(--space-md);
    }

    .cart-btn-wrapper svg {
      width: 16px;
      height: 16px;
    }
  }

  @media (max-width: 480px) {
    .cart-btn-wrapper :global(.unified-btn button) {
      font-size: var(--text-xs);
      padding: var(--space-xs) var(--space-sm);
    }

    .cart-btn-wrapper svg {
      width: 14px;
      height: 14px;
    }
  }

  /* Cart Note - Inline */
  .cart-note-inline {
    font-size: var(--text-xs);
    color: var(--color-Text-600);
    margin-top: var(--space-lg);
    margin-bottom: var(--space-lg);
    line-height: var(--leading-relaxed);
    font-style: italic;
  }

  /* Content Section */
  .product-content-section {
    /* Background handled by .bg-alt class */
  }

  .content-wrapper {
    max-width: 1400px;
    margin: 0 auto;
  }

  /* Elastic Tabs Navigation */
  .switcher-container {
    display: flex;
    justify-content: center;
    margin-bottom: var(--space-3xl);
  }

  .switcher-nav {
    font-size: var(--text-sm);
    padding: var(--space-xs) var(--space-md);
    list-style: none;
    background: var(--color-AccentOne-100);
    box-shadow: var(--shadow-lg);
    display: inline-flex;
    border-radius: 50px;
    position: relative;
    overflow-x: auto;
    scrollbar-width: none; /* Firefox */
  }

  .switcher-nav::-webkit-scrollbar {
    display: none; /* Chrome, Safari */
  }

  .switcher-btn {
    text-decoration: none;
    color: var(--color-Text-600);
    text-transform: uppercase;
    padding: var(--space-md) var(--space-lg);
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
    position: relative;
    z-index: 2;
    transition: color 0.6s;
    background: transparent;
    border: none;
    cursor: pointer;
    white-space: nowrap;
    font-weight: var(--font-semibold);
    font-size: var(--text-sm);
  }

  .switcher-btn svg {
    flex-shrink: 0;
  }

  .switcher-btn.active {
    color: white;
  }

  .switcher-btn:hover:not(.active) {
    color: var(--color-Primary-600);
  }

  /* Sliding Selector Background */
  .switcher-nav::before {
    content: '';
    height: 75%;
    display: inline-block;
    position: absolute;
    left: var(--selector-left, 0);
    top: 50%;
    transform: translateY(-50%);
    z-index: 1;
    border-radius: 50px;
    width: var(--selector-width, 0);
    transition: left 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55),
                width 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    background: var(--color-AccentOne-500);
    box-shadow: var(--shadow-md);
  }

  /* Tab Panels */
  .tabs-content {
    min-height: 400px;
  }

  .tab-panel {
    display: none;
    animation: fadeIn 0.3s ease-in;
  }

  .tab-panel.active {
    display: block;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .tab-panel h2 {
    font-size: var(--text-2xl);
    font-family: var(--font-heading);
    font-weight: var(--font-bold);
    color: var(--color-Text-700);
    line-height: var(--leading-tight);
    margin-bottom: var(--space-lg);
  }

  .tab-panel h3 {
    font-size: var(--text-xl);
    font-family: var(--font-heading);
    font-weight: var(--font-bold);
    color: var(--color-Text-700);
    line-height: var(--leading-tight);
    margin-top: var(--space-xl);
    margin-bottom: var(--space-md);
  }

  .tab-panel p {
    font-size: var(--text-base);
    font-family: var(--font-body);
    color: var(--color-Text-600);
    line-height: var(--leading-relaxed);
    margin-bottom: var(--space-md);
  }

  .tab-panel p:last-child {
    margin-bottom: 0;
  }

  /* Specification Grid */
  .spec-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
    margin-top: var(--space-lg);
  }

  .spec-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    padding: var(--space-md);
    background: var(--color-Background-50);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--color-Primary-200);
  }

  .spec-label {
    font-size: var(--text-sm);
    color: var(--color-Text-500);
    font-weight: var(--font-medium);
  }

  .spec-value {
    font-size: var(--text-base);
    color: var(--color-Text-700);
    font-weight: var(--font-semibold);
  }

  /* Specification Grid - Clean Professional Style */
  .spec-masonry {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-md);
    margin-top: var(--space-xl);
  }

  @media (min-width: 640px) {
    .spec-masonry {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .spec-masonry {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  @media (min-width: 1280px) {
    .spec-masonry {
      grid-template-columns: repeat(5, 1fr);
    }
  }

  .spec-card {
    padding: var(--space-lg) var(--space-xl);
    border-radius: var(--border-radius-xl);
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: var(--space-md);
    background: var(--color-Background-50);
    border: none;
    box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.06), inset 0 1px 3px rgba(0, 0, 0, 0.04);
    min-height: 60px;
  }

  /* All variants use same background */
  .spec-card--primary,
  .spec-card--secondary,
  .spec-card--accent {
    background: var(--color-Background-50);
  }

  /* Icon - Simple, no container */
  .spec-card__icon {
    flex-shrink: 0;
    color: var(--color-Primary-600);
  }

  .spec-card__icon svg {
    width: 20px;
    height: 20px;
  }

  /* Content Area - Left aligned */
  .spec-card__content {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 2px;
    text-align: left;
  }

  .spec-card__label {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-Text-500);
  }

  .spec-card__value {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--color-Text-700);
    line-height: var(--leading-normal);
  }

  /* Highlight text - for text-only feature cards */
  .spec-card__text {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--color-Text-700);
    line-height: var(--leading-relaxed);
  }

  /* Highlight card variant - spans 2 columns for longer text */
  .spec-card--highlight {
    grid-column: span 1;
  }

  @media (min-width: 640px) {
    .spec-card--highlight {
      grid-column: span 2;
    }
  }

  @media (min-width: 1024px) {
    .spec-card--highlight {
      grid-column: span 2;
    }
  }

  /* Reset accent text colors to match others */
  .spec-card--accent .spec-card__label {
    color: var(--color-Text-500);
  }

  .spec-card--accent .spec-card__value {
    color: var(--color-Text-700);
  }

  /* Simple List */
  .simple-list {
    list-style: none;
    padding: 0;
    margin: var(--space-lg) 0;
  }

  .simple-list li {
    padding: var(--space-sm) 0;
    padding-left: var(--space-lg);
    color: var(--color-Text-600);
    position: relative;
  }

  .simple-list li::before {
    content: "→";
    position: absolute;
    left: 0;
    color: var(--color-Primary-600);
    font-weight: bold;
  }

  .simple-list li strong {
    color: var(--color-Text-700);
  }

  /* Note */
  .note {
    padding: var(--space-md);
    background: var(--color-AccentOne-100);
    border-left: 4px solid var(--color-AccentOne-600);
    border-radius: var(--border-radius-md);
    margin-top: var(--space-lg);
  }

  .note a {
    color: var(--color-Primary-600);
    text-decoration: underline;
  }

  /* Conclusion Text */
  .conclusion-text {
    margin-top: var(--space-xl);
    padding-top: var(--space-lg);
    border-top: 2px solid var(--color-Neutral-300);
    font-style: italic;
    color: var(--color-Text-700);
  }

  /* Professional Download Section */
  .professional-download {
    margin-top: var(--space-2xl);
    padding: var(--space-xl);
    background: var(--color-Secondary-100);
    border-radius: var(--border-radius-lg);
    border: 2px solid var(--color-Secondary-300);
  }

  .professional-download h3 {
    margin-top: 0;
  }

  .professional-download .btn {
    display: inline-flex;
    align-items: center;
    gap: var(--space-sm);
    margin-top: var(--space-md);
  }

  /* Features List */
  .features-list {
    list-style: none;
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-md);
    padding: 0;
  }

  .features-list li {
    display: flex;
    align-items: flex-start;
    gap: var(--space-md);
    padding: var(--space-md);
    background: var(--color-Background-50);
    border-radius: var(--border-radius-md);
  }

  .features-list svg {
    color: var(--color-Primary-600);
    flex-shrink: 0;
    margin-top: 2px;
  }

  .features-list span {
    color: var(--color-Text-700);
    font-size: var(--text-base);
  }

  /* Related Products */
  .section-title {
    font-size: var(--text-3xl);
    font-family: var(--font-heading);
    font-weight: var(--font-bold);
    color: var(--color-Text-700);
    line-height: var(--leading-tight);
    margin-bottom: var(--space-2xl);
  }

  .related-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-md);
  }

  /* Compact Tool Cards */
  .compact-tool-card {
    display: block;
    padding: var(--space-lg);
    background: var(--color-Background-50);
    border: 2px solid var(--color-Primary-200);
    border-radius: var(--border-radius-xl);
    text-decoration: none;
    transition: all var(--transition-base);
    box-shadow: var(--shadow-sm);
  }

  .compact-tool-card:hover {
    border-color: var(--color-Primary-500);
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .compact-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-sm);
  }

  .compact-category {
    font-size: var(--text-xs);
    font-family: var(--font-body);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    color: var(--color-Primary-600);
    letter-spacing: 0.05em;
  }

  .compact-arrow {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--color-Primary-600);
    transition: transform var(--transition-fast);
    line-height: 1;
  }

  .compact-tool-card:hover .compact-arrow {
    transform: rotate(90deg);
  }

  .compact-title {
    font-size: var(--text-lg);
    font-family: var(--font-heading);
    font-weight: var(--font-bold);
    color: var(--color-Text-700);
    margin-bottom: var(--space-sm);
    line-height: var(--leading-tight);
  }

  .compact-description {
    font-size: var(--text-sm);
    font-family: var(--font-body);
    color: var(--color-Text-600);
    line-height: var(--leading-relaxed);
    margin: 0;
  }

  /* Responsive: Tablet */
  @media (min-width: 768px) {
    .product-layout {
      grid-template-columns: 1fr 1fr;
    }

    .features-list {
      grid-template-columns: repeat(2, 1fr);
    }

    .related-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* Responsive: Mobile */
  @media (max-width: 768px) {
    .product-title {
      font-size: var(--text-3xl);
    }

    .price-current {
      font-size: var(--text-xl);
    }

    .switcher-container {
      padding: 0 !important;
    }

    .switcher-nav {
      flex-direction: column !important;
      align-items: stretch !important;
      padding: var(--space-sm) !important;
      overflow-x: visible !important;
      gap: var(--space-xs) !important;
      display: flex !important;
      border-radius: 6px !important;
    }

    .switcher-btn {
      width: 100% !important;
      justify-content: flex-start !important;
      padding: var(--space-md) var(--space-lg) !important;
      text-align: left !important;
      display: inline-flex !important;
    }

    .switcher-btn span {
      display: inline !important; /* Show text labels */
    }

    .switcher-nav::before {
      display: none !important; /* Hide horizontal sliding selector */
    }

    .switcher-btn.active {
      background: var(--color-AccentOne-500) !important;
      border-radius: 6px !important;
    }

    .spec-grid {
      grid-template-columns: 1fr;
    }

    .download-section {
      padding: var(--space-md);
    }

    .product-card .product-info {
      padding: var(--space-md);
    }
  }

  @media (max-width: 480px) {
    .product-title {
      font-size: var(--text-2xl);
    }

    .price-current {
      font-size: var(--text-lg);
    }

    .switcher-btn {
      padding: var(--space-xs) var(--space-sm);
    }

    .product-card .product-info {
      padding: var(--space-sm);
    }
  }

  @media (max-width: 350px) {
    .spec-masonry {
      grid-template-columns: 1fr;
    }

    .spec-card {
      padding: var(--space-sm);
    }

    .spec-card__icon svg {
      width: 16px;
      height: 16px;
    }

    .spec-card__label {
      font-size: 10px;
    }

    .spec-card__value {
      font-size: var(--text-xs);
    }
  }

  @media (max-width: 300px) {
    .switcher-nav {
      padding: var(--space-xs) !important;
      gap: 4px !important;
      border-radius: 6px !important;
    }

    .switcher-btn {
      padding: var(--space-xs) var(--space-sm) !important;
      font-size: 11px !important;
      gap: 6px !important;
    }

    .switcher-btn svg {
      width: 16px !important;
      height: 16px !important;
    }

    .switcher-btn.active {
      border-radius: 4px !important;
    }
  }

  @media (max-width: 200px) {
    .switcher-nav {
      padding: var(--space-xs) !important;
      align-items: center !important;
      border-radius: 6px !important;
    }

    .switcher-btn {
      padding: var(--space-xs) !important;
      justify-content: center !important;
    }

    .switcher-btn span {
      display: none !important; /* Hide text, show only icons */
    }

    .switcher-btn svg {
      width: 16px !important;
      height: 16px !important;
    }

    .switcher-btn.active {
      border-radius: 4px !important;
    }
  }

  /* =========================================================
     ACCESSIBILITY THEME OVERRIDES - Asset Page
     ========================================================= */

  /* Dark mode */
  :global(body.a11y-theme-dark) .product-title,
  :global(body.a11y-theme-dark) .section-title,
  :global(body.a11y-theme-dark) .tab-panel h2,
  :global(body.a11y-theme-dark) .tab-panel h3 {
    color: var(--a11y-dark-text) !important;
  }

  :global(body.a11y-theme-dark) .product-description,
  :global(body.a11y-theme-dark) .tab-panel p,
  :global(body.a11y-theme-dark) .breadcrumbs a,
  :global(body.a11y-theme-dark) .breadcrumbs .current,
  :global(body.a11y-theme-dark) .simple-list li {
    color: var(--a11y-dark-text) !important;
  }

  /* High contrast */
  :global(body.a11y-theme-high-contrast) .product-title,
  :global(body.a11y-theme-high-contrast) .section-title,
  :global(body.a11y-theme-high-contrast) .tab-panel h2,
  :global(body.a11y-theme-high-contrast) .tab-panel h3 {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  :global(body.a11y-theme-high-contrast) .product-description,
  :global(body.a11y-theme-high-contrast) .tab-panel p,
  :global(body.a11y-theme-high-contrast) .breadcrumbs a,
  :global(body.a11y-theme-high-contrast) .breadcrumbs .current,
  :global(body.a11y-theme-high-contrast) .simple-list li {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  /* Cream mode */
  :global(body.a11y-theme-cream) .product-title,
  :global(body.a11y-theme-cream) .section-title,
  :global(body.a11y-theme-cream) .tab-panel h2,
  :global(body.a11y-theme-cream) .tab-panel h3 {
    color: var(--a11y-cream-text, #4a3f2f) !important;
  }

  :global(body.a11y-theme-cream) .product-description,
  :global(body.a11y-theme-cream) .tab-panel p,
  :global(body.a11y-theme-cream) .breadcrumbs a,
  :global(body.a11y-theme-cream) .breadcrumbs .current,
  :global(body.a11y-theme-cream) .simple-list li {
    color: #5d4f3a !important;
  }

  /* Monochrome */
  :global(body.a11y-theme-monochrome) .product-title,
  :global(body.a11y-theme-monochrome) .section-title,
  :global(body.a11y-theme-monochrome) .tab-panel h2,
  :global(body.a11y-theme-monochrome) .tab-panel h3,
  :global(body.a11y-cvd-monochrome) .product-title,
  :global(body.a11y-cvd-monochrome) .section-title,
  :global(body.a11y-cvd-monochrome) .tab-panel h2,
  :global(body.a11y-cvd-monochrome) .tab-panel h3 {
    color: #1a1a1a !important;
  }

  :global(body.a11y-theme-monochrome) .product-description,
  :global(body.a11y-theme-monochrome) .tab-panel p,
  :global(body.a11y-theme-monochrome) .breadcrumbs a,
  :global(body.a11y-theme-monochrome) .breadcrumbs .current,
  :global(body.a11y-theme-monochrome) .simple-list li,
  :global(body.a11y-cvd-monochrome) .product-description,
  :global(body.a11y-cvd-monochrome) .tab-panel p,
  :global(body.a11y-cvd-monochrome) .breadcrumbs a,
  :global(body.a11y-cvd-monochrome) .breadcrumbs .current,
  :global(body.a11y-cvd-monochrome) .simple-list li {
    color: #4a4a4a !important;
  }

  /* =========================================================
     PRODUCT CARD ACCESSIBILITY OVERRIDES
     ========================================================= */

  /* Dark mode - Product cards */
  :global(body.a11y-theme-dark) .product-card {
    background: var(--color-Background-300) !important;
  }

  :global(body.a11y-theme-dark) .product-card .product-image {
    background: var(--color-Background-200) !important;
  }

  :global(body.a11y-theme-dark) .product-card .product-name {
    color: var(--a11y-dark-text) !important;
  }

  :global(body.a11y-theme-dark) .product-card .product-description {
    color: var(--a11y-dark-text) !important;
  }

  :global(body.a11y-theme-dark) .product-card .product-footer {
    border-top-color: var(--color-Background-200) !important;
  }

  :global(body.a11y-theme-dark) .product-card .view-link {
    color: var(--a11y-dark-accent) !important;
  }

  :global(body.a11y-theme-dark) .features-list li {
    background: var(--color-Background-300) !important;
  }

  :global(body.a11y-theme-dark) .features-list span {
    color: var(--a11y-dark-text) !important;
  }

  :global(body.a11y-theme-dark) .features-list svg {
    color: var(--a11y-dark-accent) !important;
  }

  /* High contrast - Product cards */
  :global(body.a11y-theme-high-contrast) .product-card {
    background: var(--a11y-hc-bg, #000000) !important;
    border: 2px solid var(--a11y-hc-accent) !important;
  }

  :global(body.a11y-theme-high-contrast) .product-card .product-image {
    background: #111111 !important;
    border-bottom: 2px solid var(--a11y-hc-accent) !important;
  }

  :global(body.a11y-theme-high-contrast) .product-card .product-name {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  :global(body.a11y-theme-high-contrast) .product-card .product-description {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  :global(body.a11y-theme-high-contrast) .product-card .product-footer {
    border-top-color: var(--a11y-hc-accent) !important;
  }

  :global(body.a11y-theme-high-contrast) .product-card .view-link {
    color: var(--a11y-hc-accent) !important;
  }

  :global(body.a11y-theme-high-contrast) .features-list li {
    background: var(--a11y-hc-bg, #000000) !important;
    border: 2px solid var(--a11y-hc-accent) !important;
  }

  :global(body.a11y-theme-high-contrast) .features-list span {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  :global(body.a11y-theme-high-contrast) .features-list svg {
    color: var(--a11y-hc-accent) !important;
  }

  /* Cream mode - Product cards */
  :global(body.a11y-theme-cream) .product-card {
    background: var(--color-Background-200) !important;
  }

  :global(body.a11y-theme-cream) .product-card .product-image {
    background: var(--color-Background-300) !important;
  }

  :global(body.a11y-theme-cream) .product-card .product-name {
    color: var(--a11y-cream-text, #4a3f2f) !important;
  }

  :global(body.a11y-theme-cream) .product-card .product-description {
    color: #5d4f3a !important;
  }

  :global(body.a11y-theme-cream) .product-card .product-footer {
    border-top-color: var(--color-Background-300) !important;
  }

  :global(body.a11y-theme-cream) .product-card .view-link {
    color: var(--a11y-cream-accent, #8b6914) !important;
  }

  :global(body.a11y-theme-cream) .features-list li {
    background: var(--color-Background-200) !important;
  }

  :global(body.a11y-theme-cream) .features-list span {
    color: #5d4f3a !important;
  }

  :global(body.a11y-theme-cream) .features-list svg {
    color: var(--a11y-cream-accent, #8b6914) !important;
  }

  /* Monochrome - Product cards */
  :global(body.a11y-theme-monochrome) .product-card,
  :global(body.a11y-cvd-monochrome) .product-card {
    background: var(--color-Background-200) !important;
  }

  :global(body.a11y-theme-monochrome) .product-card .product-image,
  :global(body.a11y-cvd-monochrome) .product-card .product-image {
    background: var(--color-Background-300) !important;
  }

  :global(body.a11y-theme-monochrome) .product-card .product-name,
  :global(body.a11y-cvd-monochrome) .product-card .product-name {
    color: #1a1a1a !important;
  }

  :global(body.a11y-theme-monochrome) .product-card .product-description,
  :global(body.a11y-cvd-monochrome) .product-card .product-description {
    color: #4a4a4a !important;
  }

  :global(body.a11y-theme-monochrome) .product-card .product-footer,
  :global(body.a11y-cvd-monochrome) .product-card .product-footer {
    border-top-color: var(--color-Background-300) !important;
  }

  :global(body.a11y-theme-monochrome) .product-card .view-link,
  :global(body.a11y-cvd-monochrome) .product-card .view-link {
    color: #333333 !important;
  }

  :global(body.a11y-theme-monochrome) .features-list li,
  :global(body.a11y-cvd-monochrome) .features-list li {
    background: var(--color-Background-200) !important;
  }

  :global(body.a11y-theme-monochrome) .features-list span,
  :global(body.a11y-cvd-monochrome) .features-list span {
    color: #4a4a4a !important;
  }

  :global(body.a11y-theme-monochrome) .features-list svg,
  :global(body.a11y-cvd-monochrome) .features-list svg {
    color: #333333 !important;
  }

  /* =========================================================
     TAB SWITCHER ACCESSIBILITY OVERRIDES
     ========================================================= */

  /* Dark mode & High Contrast: Transparent background with accent border */
  :global(body.a11y-theme-dark) .switcher-nav,
  :global(body.a11y-theme-high-contrast) .switcher-nav {
    background: transparent !important;
    border: 2px solid var(--a11y-hc-accent, var(--a11y-dark-accent, var(--color-Primary-500))) !important;
  }

  :global(body.a11y-theme-dark) .switcher-btn {
    color: var(--a11y-dark-text) !important;
    border: none !important;
    background: transparent !important;
  }

  :global(body.a11y-theme-high-contrast) .switcher-btn {
    color: var(--a11y-hc-text) !important;
    border: none !important;
    background: transparent !important;
  }

  /* Active button uses highlight accent color */
  :global(body.a11y-theme-dark) .switcher-btn.active {
    color: var(--a11y-dark-bg) !important;
    border: none !important;
    background: transparent !important;
  }

  :global(body.a11y-theme-high-contrast) .switcher-btn.active {
    color: var(--a11y-hc-bg) !important;
    border: none !important;
    background: transparent !important;
  }

  :global(body.a11y-theme-dark) .switcher-nav::before,
  :global(body.a11y-theme-high-contrast) .switcher-nav::before {
    background: var(--a11y-hc-accent, var(--a11y-dark-accent, var(--color-Primary-500))) !important;
  }

  /* Cream theme */
  :global(body.a11y-theme-cream) .switcher-nav {
    background: var(--a11y-cream-bg) !important;
    border: 2px solid var(--a11y-cream-accent) !important;
  }

  :global(body.a11y-theme-cream) .switcher-btn {
    color: var(--a11y-cream-text) !important;
  }

  :global(body.a11y-theme-cream) .switcher-btn.active {
    color: var(--color-Background-50) !important;
  }

  :global(body.a11y-theme-cream) .switcher-nav::before {
    background: var(--a11y-cream-accent) !important;
  }

  /* Monochrome theme */
  :global(body.a11y-theme-monochrome) .switcher-nav,
  :global(body.a11y-cvd-monochrome) .switcher-nav {
    background: transparent !important;
    border: 2px solid #333333 !important;
  }

  :global(body.a11y-theme-monochrome) .switcher-btn,
  :global(body.a11y-cvd-monochrome) .switcher-btn {
    color: #333333 !important;
  }

  :global(body.a11y-theme-monochrome) .switcher-btn.active,
  :global(body.a11y-cvd-monochrome) .switcher-btn.active {
    color: #ffffff !important;
  }

  :global(body.a11y-theme-monochrome) .switcher-nav::before,
  :global(body.a11y-cvd-monochrome) .switcher-nav::before {
    background: #333333 !important;
  }

  /* CVD Color Blind modes (Protanopia, Deuteranopia, Tritanopia) */
  :global(body.a11y-theme-protanopia) .switcher-nav,
  :global(body.a11y-theme-deuteranopia) .switcher-nav,
  :global(body.a11y-theme-tritanopia) .switcher-nav,
  :global(body.a11y-cvd-protanopia) .switcher-nav,
  :global(body.a11y-cvd-deuteranopia) .switcher-nav,
  :global(body.a11y-cvd-tritanopia) .switcher-nav {
    background: transparent !important;
    border: 2px solid var(--color-Primary-600) !important;
  }

  :global(body.a11y-theme-protanopia) .switcher-btn,
  :global(body.a11y-theme-deuteranopia) .switcher-btn,
  :global(body.a11y-theme-tritanopia) .switcher-btn,
  :global(body.a11y-cvd-protanopia) .switcher-btn,
  :global(body.a11y-cvd-deuteranopia) .switcher-btn,
  :global(body.a11y-cvd-tritanopia) .switcher-btn {
    color: var(--color-Text-700) !important;
    border: none !important;
    background: transparent !important;
  }

  :global(body.a11y-theme-protanopia) .switcher-btn.active,
  :global(body.a11y-theme-deuteranopia) .switcher-btn.active,
  :global(body.a11y-theme-tritanopia) .switcher-btn.active,
  :global(body.a11y-cvd-protanopia) .switcher-btn.active,
  :global(body.a11y-cvd-deuteranopia) .switcher-btn.active,
  :global(body.a11y-cvd-tritanopia) .switcher-btn.active {
    color: #ffffff !important;
    border: none !important;
    background: transparent !important;
  }

  :global(body.a11y-theme-protanopia) .switcher-nav::before,
  :global(body.a11y-theme-deuteranopia) .switcher-nav::before,
  :global(body.a11y-theme-tritanopia) .switcher-nav::before,
  :global(body.a11y-cvd-protanopia) .switcher-nav::before,
  :global(body.a11y-cvd-deuteranopia) .switcher-nav::before,
  :global(body.a11y-cvd-tritanopia) .switcher-nav::before {
    background: var(--color-Primary-600) !important;
  }

  /* Mobile: Active button background */
  @media (max-width: 768px) {
    :global(body.a11y-theme-dark) .switcher-btn.active,
    :global(body.a11y-theme-high-contrast) .switcher-btn.active {
      background: var(--a11y-hc-accent, var(--a11y-dark-accent, var(--color-Primary-500))) !important;
    }

    :global(body.a11y-theme-cream) .switcher-btn.active {
      background: var(--a11y-cream-accent) !important;
    }

    :global(body.a11y-theme-monochrome) .switcher-btn.active,
    :global(body.a11y-cvd-monochrome) .switcher-btn.active {
      background: #333333 !important;
    }

    :global(body.a11y-theme-protanopia) .switcher-btn.active,
    :global(body.a11y-theme-deuteranopia) .switcher-btn.active,
    :global(body.a11y-theme-tritanopia) .switcher-btn.active,
    :global(body.a11y-cvd-protanopia) .switcher-btn.active,
    :global(body.a11y-cvd-deuteranopia) .switcher-btn.active,
    :global(body.a11y-cvd-tritanopia) .switcher-btn.active {
      background: var(--color-Primary-600) !important;
    }
  }

  /* =========================================================
     SPEC CARDS & IMAGE ACCESSIBILITY OVERRIDES
     ========================================================= */

  /* Dark mode - Spec items and images */
  :global(body.a11y-theme-dark) .spec-item {
    background: var(--color-Background-300) !important;
    border-color: var(--color-Primary-400) !important;
  }

  :global(body.a11y-theme-dark) .spec-label {
    color: var(--a11y-dark-text) !important;
  }

  :global(body.a11y-theme-dark) .spec-value {
    color: var(--a11y-dark-text) !important;
  }

  :global(body.a11y-theme-dark) .main-image,
  :global(body.a11y-theme-dark) .thumbnail {
    background: var(--color-Background-300) !important;
    border-color: var(--color-Primary-400) !important;
  }

  /* High contrast - Spec items and images */
  :global(body.a11y-theme-high-contrast) .spec-item {
    background: var(--a11y-hc-bg, #000000) !important;
    border: 2px solid var(--a11y-hc-accent) !important;
  }

  :global(body.a11y-theme-high-contrast) .spec-label {
    color: #cccccc !important;
  }

  :global(body.a11y-theme-high-contrast) .spec-value {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  :global(body.a11y-theme-high-contrast) .main-image,
  :global(body.a11y-theme-high-contrast) .thumbnail {
    background: #111111 !important;
    border: 2px solid var(--a11y-hc-accent) !important;
  }

  /* Cream mode - Spec items and images */
  :global(body.a11y-theme-cream) .spec-item {
    background: var(--color-Background-200) !important;
    border-color: var(--a11y-cream-accent, #8b6914) !important;
  }

  :global(body.a11y-theme-cream) .spec-label {
    color: #7a6b54 !important;
  }

  :global(body.a11y-theme-cream) .spec-value {
    color: var(--a11y-cream-text, #4a3f2f) !important;
  }

  :global(body.a11y-theme-cream) .main-image,
  :global(body.a11y-theme-cream) .thumbnail {
    background: var(--color-Background-200) !important;
    border-color: var(--a11y-cream-accent, #8b6914) !important;
  }

  /* Monochrome - Spec items and images */
  :global(body.a11y-theme-monochrome) .spec-item,
  :global(body.a11y-cvd-monochrome) .spec-item {
    background: var(--color-Background-200) !important;
    border-color: #666666 !important;
  }

  :global(body.a11y-theme-monochrome) .spec-label,
  :global(body.a11y-cvd-monochrome) .spec-label {
    color: #666666 !important;
  }

  :global(body.a11y-theme-monochrome) .spec-value,
  :global(body.a11y-cvd-monochrome) .spec-value {
    color: #1a1a1a !important;
  }

  :global(body.a11y-theme-monochrome) .main-image,
  :global(body.a11y-theme-monochrome) .thumbnail,
  :global(body.a11y-cvd-monochrome) .main-image,
  :global(body.a11y-cvd-monochrome) .thumbnail {
    background: var(--color-Background-200) !important;
    border-color: #666666 !important;
  }

  /* =========================================================
     BUTTON TEXT ACCESSIBILITY OVERRIDES
     ========================================================= */

  /* Dark mode - Button text */
  :global(body.a11y-theme-dark) .cart-btn-wrapper :global(button),
  :global(body.a11y-theme-dark) .cart-btn-wrapper :global(a) {
    color: var(--a11y-dark-text, #f1f5f9) !important;
  }

  /* High contrast - Button text */
  :global(body.a11y-theme-high-contrast) .cart-btn-wrapper :global(button),
  :global(body.a11y-theme-high-contrast) .cart-btn-wrapper :global(a) {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  /* Cream mode - Button text */
  :global(body.a11y-theme-cream) .cart-btn-wrapper :global(button),
  :global(body.a11y-theme-cream) .cart-btn-wrapper :global(a) {
    color: var(--a11y-cream-text, #4a3f2f) !important;
  }

  /* Monochrome - Button text */
  :global(body.a11y-theme-monochrome) .cart-btn-wrapper :global(button),
  :global(body.a11y-theme-monochrome) .cart-btn-wrapper :global(a),
  :global(body.a11y-cvd-monochrome) .cart-btn-wrapper :global(button),
  :global(body.a11y-cvd-monochrome) .cart-btn-wrapper :global(a) {
    color: #1a1a1a !important;
  }

  /* CVD modes - Button text */
  :global(body.a11y-theme-protanopia) .cart-btn-wrapper :global(button),
  :global(body.a11y-theme-deuteranopia) .cart-btn-wrapper :global(button),
  :global(body.a11y-theme-tritanopia) .cart-btn-wrapper :global(button),
  :global(body.a11y-cvd-protanopia) .cart-btn-wrapper :global(button),
  :global(body.a11y-cvd-deuteranopia) .cart-btn-wrapper :global(button),
  :global(body.a11y-cvd-tritanopia) .cart-btn-wrapper :global(button),
  :global(body.a11y-theme-protanopia) .cart-btn-wrapper :global(a),
  :global(body.a11y-theme-deuteranopia) .cart-btn-wrapper :global(a),
  :global(body.a11y-theme-tritanopia) .cart-btn-wrapper :global(a),
  :global(body.a11y-cvd-protanopia) .cart-btn-wrapper :global(a),
  :global(body.a11y-cvd-deuteranopia) .cart-btn-wrapper :global(a),
  :global(body.a11y-cvd-tritanopia) .cart-btn-wrapper :global(a) {
    color: var(--color-Text-700) !important;
  }

  /* =========================================================
     COMPACT TOOL CARDS ACCESSIBILITY OVERRIDES
     ========================================================= */

  /* Dark mode - Compact cards */
  :global(body.a11y-theme-dark) .compact-tool-card {
    background: var(--color-Background-300) !important;
    border-color: var(--color-Primary-400) !important;
  }

  :global(body.a11y-theme-dark) .compact-title {
    color: var(--a11y-dark-text) !important;
  }

  :global(body.a11y-theme-dark) .compact-description {
    color: var(--a11y-dark-text) !important;
  }

  :global(body.a11y-theme-dark) .compact-category,
  :global(body.a11y-theme-dark) .compact-arrow {
    color: var(--a11y-dark-accent) !important;
  }

  /* High contrast - Compact cards */
  :global(body.a11y-theme-high-contrast) .compact-tool-card {
    background: var(--a11y-hc-bg, #000000) !important;
    border: 2px solid var(--a11y-hc-accent) !important;
  }

  :global(body.a11y-theme-high-contrast) .compact-title {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  :global(body.a11y-theme-high-contrast) .compact-description {
    color: var(--a11y-hc-text, #ffffff) !important;
  }

  :global(body.a11y-theme-high-contrast) .compact-category,
  :global(body.a11y-theme-high-contrast) .compact-arrow {
    color: var(--a11y-hc-accent) !important;
  }

  /* Cream mode - Compact cards */
  :global(body.a11y-theme-cream) .compact-tool-card {
    background: var(--color-Background-200) !important;
    border-color: var(--a11y-cream-accent, #8b6914) !important;
  }

  :global(body.a11y-theme-cream) .compact-title {
    color: var(--a11y-cream-text, #4a3f2f) !important;
  }

  :global(body.a11y-theme-cream) .compact-description {
    color: #5d4f3a !important;
  }

  :global(body.a11y-theme-cream) .compact-category,
  :global(body.a11y-theme-cream) .compact-arrow {
    color: var(--a11y-cream-accent, #8b6914) !important;
  }

  /* Monochrome - Compact cards */
  :global(body.a11y-theme-monochrome) .compact-tool-card,
  :global(body.a11y-cvd-monochrome) .compact-tool-card {
    background: var(--color-Background-200) !important;
    border-color: #666666 !important;
  }

  :global(body.a11y-theme-monochrome) .compact-title,
  :global(body.a11y-cvd-monochrome) .compact-title {
    color: #1a1a1a !important;
  }

  :global(body.a11y-theme-monochrome) .compact-description,
  :global(body.a11y-cvd-monochrome) .compact-description {
    color: #4a4a4a !important;
  }

  :global(body.a11y-theme-monochrome) .compact-category,
  :global(body.a11y-theme-monochrome) .compact-arrow,
  :global(body.a11y-cvd-monochrome) .compact-category,
  :global(body.a11y-cvd-monochrome) .compact-arrow {
    color: #333333 !important;
  }

  /* CVD modes - Compact cards */
  :global(body.a11y-theme-protanopia) .compact-tool-card,
  :global(body.a11y-theme-deuteranopia) .compact-tool-card,
  :global(body.a11y-theme-tritanopia) .compact-tool-card,
  :global(body.a11y-cvd-protanopia) .compact-tool-card,
  :global(body.a11y-cvd-deuteranopia) .compact-tool-card,
  :global(body.a11y-cvd-tritanopia) .compact-tool-card {
    background: var(--color-Background-100) !important;
    border-color: var(--color-Primary-600) !important;
  }

  :global(body.a11y-theme-protanopia) .compact-title,
  :global(body.a11y-theme-deuteranopia) .compact-title,
  :global(body.a11y-theme-tritanopia) .compact-title,
  :global(body.a11y-cvd-protanopia) .compact-title,
  :global(body.a11y-cvd-deuteranopia) .compact-title,
  :global(body.a11y-cvd-tritanopia) .compact-title {
    color: var(--color-Text-700) !important;
  }

  :global(body.a11y-theme-protanopia) .compact-description,
  :global(body.a11y-theme-deuteranopia) .compact-description,
  :global(body.a11y-theme-tritanopia) .compact-description,
  :global(body.a11y-cvd-protanopia) .compact-description,
  :global(body.a11y-cvd-deuteranopia) .compact-description,
  :global(body.a11y-cvd-tritanopia) .compact-description {
    color: var(--color-Text-600) !important;
  }

  :global(body.a11y-theme-protanopia) .compact-category,
  :global(body.a11y-theme-protanopia) .compact-arrow,
  :global(body.a11y-theme-deuteranopia) .compact-category,
  :global(body.a11y-theme-deuteranopia) .compact-arrow,
  :global(body.a11y-theme-tritanopia) .compact-category,
  :global(body.a11y-theme-tritanopia) .compact-arrow,
  :global(body.a11y-cvd-protanopia) .compact-category,
  :global(body.a11y-cvd-protanopia) .compact-arrow,
  :global(body.a11y-cvd-deuteranopia) .compact-category,
  :global(body.a11y-cvd-deuteranopia) .compact-arrow,
  :global(body.a11y-cvd-tritanopia) .compact-category,
  :global(body.a11y-cvd-tritanopia) .compact-arrow {
    color: var(--color-Primary-600) !important;
  }
</style>
