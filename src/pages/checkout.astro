---
import BaseLayout from '../Layouts/BaseLayout.astro';
import Button from '../components/Button/Button.astro';
import DownloadSummary from '../components/Checkout/DownloadSummary.astro';
import Badge from '../components/Badge/Badge.astro';
---

<BaseLayout
  title="Get Your Downloads | Walking with a Smile"
  description="Sign up to get your free downloads"
>
  <section class="checkout-section section">
    <div class="container container-7xl">
      <div class="checkout-header">
        <h1 class="checkout-title">Get Your Free Downloads</h1>
        <p class="checkout-subtitle">Join our newsletter to access your selected resources</p>
      </div>

      <div class="checkout-content">
        <!-- Left Column: Newsletter Signup Form -->
        <div class="checkout-forms">
          <div class="checkout-section-card card">
            <h2 class="section-card-title">Your Information</h2>
            <form id="newsletter-form" class="checkout-form">
              <div class="form-row">
                <div class="form-group">
                  <label for="firstName" class="form-label">First Name *</label>
                  <input
                    type="text"
                    id="firstName"
                    name="firstName"
                    class="form-input"
                    placeholder="Your first name"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="lastName" class="form-label">Last Name *</label>
                  <input
                    type="text"
                    id="lastName"
                    name="lastName"
                    class="form-input"
                    placeholder="Your last name"
                    required
                  />
                </div>
              </div>

              <div class="form-group">
                <label for="email" class="form-label">Email Address *</label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="form-input"
                  placeholder="you@example.com"
                  required
                />
                <p class="form-hint">We'll send your download links to this email</p>
              </div>

              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="newsletter" name="newsletter" checked />
                  <span>Yes, I'd like to receive updates and resources from Walking with a Smile</span>
                </label>
              </div>

              <div class="info-notice">
                <Badge
                  type="trust"
                  label="Info"
                  icon="info-fill"
                  iconCollection="interface"
                  variant="soft"
                  size="sm"
                />
                <span>All resources are completely free. Your email is only used to send download links and optional updates.</span>
              </div>

              <!-- Submit Button -->
              <div class="checkout-actions">
                <Button type="submit" variant="primary" size="lg" className="btn-block" id="submit-button">
                  <span id="button-text">Get My Downloads</span>
                  <span id="button-spinner" style="display: none;">Processing...</span>
                </Button>
                <p class="checkout-terms">
                  By submitting, you agree to our
                  <a href="/legal/terms">Terms of Service</a> and
                  <a href="/legal/privacy">Privacy Policy</a>
                </p>
              </div>
            </form>
          </div>
        </div>

        <!-- Right Column: Download Summary -->
        <div class="order-summary-container">
          <div class="order-summary card">
            <DownloadSummary />
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  import '../lib/cart/checkout-form';
</script>

<style>
  .info-notice {
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
    padding: var(--space-md);
    background: color-mix(in oklch, var(--color-Primary-500) 10%, transparent);
    border: 1px solid color-mix(in oklch, var(--color-Primary-500) 20%, transparent);
    border-radius: var(--border-radius-md);
    margin-top: var(--space-lg);
    font-size: var(--text-sm);
    color: var(--color-Text-600);
  }
</style>
