/**
 * ============================================
 * ACCESSIBILITY THEME STYLES
 * ============================================
 *
 * Centralized accessibility tokens and styles.
 * Change tokens here to update all accessibility
 * themes site-wide.
 *
 * Token naming convention:
 * --a11y-hc-*     = High Contrast theme
 * --a11y-dark-*   = Dark theme
 * --a11y-cream-*  = Cream theme
 * --a11y-mono-*   = Monochrome theme
 */

/* ============================================
   ROOT TOKENS - Defaults
   ============================================ */
:root {
  /* Button text colors */
  --btn-filled-text: rgb(73, 68, 68);
  --btn-outline-text: var(--color-Primary-600);
  --btn-ghost-text: var(--color-Primary-500);

  /* Media filter tokens (no change by default) */
  --media-brightness: 1;
  --media-saturation: 1;
  --media-contrast: 1;

  /* Page/body background - use Background-100 for consistency with .bg-alt */
  --page-bg: var(--color-Background-100);

  /* Hero overlay color (for gradient overlays on hero images) */
  --hero-overlay-color: var(--color-Background-100);

  /* Accessibility Panel tokens - use base tokens so themes can override */
  --a11y-bg: var(--color-Background-50);
  --a11y-text: var(--color-Text-900);
  --a11y-panel-bg: var(--color-Background-50);
  --a11y-panel-bg-alt: var(--color-Background-100);
  --a11y-panel-text: var(--color-Text-900);
  --a11y-panel-text-muted: var(--color-Text-600);
  --a11y-panel-accent: var(--color-Primary-500);
  --a11y-panel-accent-hover: var(--color-Primary-600);
  --a11y-panel-border: var(--color-Background-300);
  --a11y-panel-success: var(--color-Success);
  --a11y-panel-error: var(--color-Error);

  /* ============================================
     PREVIEW TOKENS - Set by ThemeSwitcher.js
     See: src/scripts/ThemeSwitcher.js setPreviewTokens()
     ============================================ */
  --theme-preview-default-bg: var(--color-Background-100);
  --theme-preview-default-accent: var(--color-Primary-500);
}

/* ============================================
   BUTTON STYLES - All accessibility themes
   ============================================
   Note: Color tokens are defined in theme files (src/styles/themes/a11y/*.css)
   which are dynamically loaded by ThemeSwitcher.js */

/* FILLED buttons - use theme token (exclude theme preview cards) */
body[class*="a11y-"] .btn-primary:not(.a11y-theme-card),
body[class*="a11y-"] .btn-secondary:not(.a11y-theme-card),
body[class*="a11y-"] .btn-filled:not(.a11y-theme-card),
body[class*="a11y-"] .btn-solid:not(.a11y-theme-card),
body[class*="a11y-"] button[class*="btn-primary"]:not(.a11y-theme-card),
body[class*="a11y-"] a[class*="btn-primary"]:not(.a11y-theme-card) {
  color: var(--btn-filled-text) !important;
}

body[class*="a11y-"] .btn-primary:not(.a11y-theme-card) span,
body[class*="a11y-"] .btn-secondary:not(.a11y-theme-card) span,
body[class*="a11y-"] .btn-filled:not(.a11y-theme-card) span,
body[class*="a11y-"] .btn-solid:not(.a11y-theme-card) span {
  color: var(--btn-filled-text) !important;
}

/* OUTLINE/GHOST buttons - dark text using theme token (exclude theme preview cards) */
body[class*="a11y-"] .btn-outline:not(.a11y-theme-card),
body[class*="a11y-"] .btn-ghost:not(.a11y-theme-card),
body[class*="a11y-"] .btn-text:not(.a11y-theme-card),
body[class*="a11y-"] .btn-link:not(.a11y-theme-card) {
  color: var(--btn-outline-text) !important;
}

body[class*="a11y-"] .btn-outline:not(.a11y-theme-card) span,
body[class*="a11y-"] .btn-ghost:not(.a11y-theme-card) span,
body[class*="a11y-"] .btn-text:not(.a11y-theme-card) span,
body[class*="a11y-"] .btn-link:not(.a11y-theme-card) span {
  color: var(--btn-outline-text) !important;
}

/* Outline button hover - becomes filled (exclude theme preview cards) */
body[class*="a11y-"] .btn-outline:not(.a11y-theme-card):hover {
  color: var(--btn-filled-text) !important;
}

body[class*="a11y-"] .btn-outline:not(.a11y-theme-card):hover span {
  color: var(--btn-filled-text) !important;
}

/* ============================================
   HIGH CONTRAST - Specific element styles
   ============================================ */

/* Standard buttons */
body.a11y-theme-high-contrast .btn-primary:not(.a11y-theme-card),
body.a11y-theme-high-contrast .btn-filled:not(.a11y-theme-card) {
  background: var(--color-Primary-500) !important;
  color: var(--btn-filled-text) !important;
  border: 2px solid var(--color-Primary-500) !important;
  font-weight: 700 !important;
}

body.a11y-theme-high-contrast .btn-outline:not(.a11y-theme-card) {
  background: transparent !important;
  border: 2px solid var(--color-Primary-500) !important;
  color: var(--color-Primary-500) !important;
  font-weight: 700 !important;
}

body.a11y-theme-high-contrast .btn-outline:not(.a11y-theme-card):hover {
  background: var(--color-Primary-500) !important;
  color: var(--btn-filled-text) !important;
  font-weight: 700 !important;
}

/* Hero SVG (exclude theme card logos) */
body.a11y-theme-high-contrast .svg-container:not(.a11y-theme-card *) svg,
body.a11y-theme-high-contrast .svg-container:not(.a11y-theme-card *) path {
  fill: var(--color-Primary-500) !important;
}

/* ColourFlow buttons */
body.a11y-theme-high-contrast .ccb-button,
body.a11y-theme-high-contrast .ccb-button--primary,
body.a11y-theme-high-contrast [class*="ccb-button"] {
  background: transparent !important;
  color: var(--color-Primary-500) !important;
  border: 3px solid var(--color-Primary-500) !important;
  box-shadow: none !important;
  backdrop-filter: none !important;
}

body.a11y-theme-high-contrast .ccb-button:hover,
body.a11y-theme-high-contrast .ccb-button--primary:hover,
body.a11y-theme-high-contrast [class*="ccb-button"]:hover {
  background: var(--color-Primary-500) !important;
  color: var(--btn-filled-text) !important;
  border-color: var(--color-Primary-500) !important;
}

/* Image containers with accent border (not img itself - preserves rounded corners) */
body.a11y-theme-high-contrast .image-container,
body.a11y-theme-high-contrast .pillar-image,
body.a11y-theme-high-contrast .who-card-image,
body.a11y-theme-high-contrast .who-title-image,
body.a11y-theme-high-contrast .card-image,
body.a11y-theme-high-contrast .project-card__image,
body.a11y-theme-high-contrast .blog-card__image,
body.a11y-theme-high-contrast .team-card__image,
body.a11y-theme-high-contrast .product-card__image,
body.a11y-theme-high-contrast .mixed-card-image,
body.a11y-theme-high-contrast .story-image-card,
body.a11y-theme-high-contrast .post-card-image,
body.a11y-theme-high-contrast .article-image,
body.a11y-theme-high-contrast .resource-image {
  border: 3px solid var(--color-Primary-500) !important;
  box-shadow: none !important;
}

/* Dark mode image containers - subtle border for definition */
body.a11y-theme-dark .image-container,
body.a11y-theme-dark .pillar-image,
body.a11y-theme-dark .who-card-image,
body.a11y-theme-dark .who-title-image,
body.a11y-theme-dark .card-image,
body.a11y-theme-dark .project-card__image,
body.a11y-theme-dark .blog-card__image,
body.a11y-theme-dark .team-card__image,
body.a11y-theme-dark .product-card__image,
body.a11y-theme-dark .mixed-card-image,
body.a11y-theme-dark .story-image-card,
body.a11y-theme-dark .post-card-image,
body.a11y-theme-dark .article-image,
body.a11y-theme-dark .resource-image {
  border: 2px solid var(--color-Primary-500) !important;
}

/* Navigation links - text color only, no background fill */
body.a11y-theme-high-contrast .nav-links a {
  color: var(--color-Primary-500) !important;
}

body.a11y-theme-high-contrast .nav-links a:hover {
  color: var(--color-Text-50) !important;
  text-decoration: underline !important;
}

/* Side tabs */
body.a11y-theme-high-contrast .side-tab {
  background: var(--color-Background-100) !important;
  border: 2px solid var(--color-Text-900) !important;
}

body.a11y-theme-high-contrast .side-tab:hover {
  background: var(--color-Primary-500) !important;
  border-color: var(--color-Primary-500) !important;
}

/* Dark theme side tabs */
body.a11y-theme-dark .side-tab {
  background: var(--color-Background-100) !important;
  border: 1px solid var(--color-Background-300) !important;
}

body.a11y-theme-dark .side-tab:hover {
  background: var(--color-Primary-500) !important;
}

/* Cream theme side tabs */
body.a11y-theme-cream .side-tab {
  background: var(--color-Background-100) !important;
  border: 1px solid var(--color-Primary-500) !important;
}

body.a11y-theme-cream .side-tab:hover {
  background: var(--color-Primary-500) !important;
}

/* ============================================
   DARK THEME - Specific element styles
   ============================================ */

/* Standard buttons */
body.a11y-theme-dark .btn-primary:not(.a11y-theme-card),
body.a11y-theme-dark .btn-filled:not(.a11y-theme-card) {
  background: var(--color-Primary-500) !important;
  color: var(--btn-filled-text) !important;
  border: 2px solid var(--color-Primary-500) !important;
  font-weight: 700 !important;
}

body.a11y-theme-dark .btn-outline:not(.a11y-theme-card) {
  background: transparent !important;
  border: 2px solid var(--color-Primary-500) !important;
  color: var(--color-Primary-500) !important;
  font-weight: 700 !important;
}

body.a11y-theme-dark .btn-outline:not(.a11y-theme-card):hover {
  background: var(--color-Primary-500) !important;
  color: var(--btn-filled-text) !important;
  font-weight: 700 !important;
}

/* Navigation links - text color only, no background fill */
body.a11y-theme-dark .nav-links a {
  color: var(--color-Primary-500) !important;
}

body.a11y-theme-dark .nav-links a:hover {
  color: var(--color-Text-50) !important;
}

/* ============================================
   CREAM THEME - Specific element styles
   ============================================ */

/* Standard buttons */
body.a11y-theme-cream .btn-primary:not(.a11y-theme-card),
body.a11y-theme-cream .btn-filled:not(.a11y-theme-card) {
  background: var(--color-Primary-500) !important;
  color: var(--btn-filled-text) !important;
  border: 2px solid var(--color-Primary-500) !important;
}

body.a11y-theme-cream .btn-outline:not(.a11y-theme-card) {
  background: transparent !important;
  border: 2px solid var(--color-Primary-500) !important;
  color: var(--color-Primary-500) !important;
}

body.a11y-theme-cream .btn-outline:not(.a11y-theme-card):hover {
  background: var(--color-Primary-500) !important;
  color: var(--btn-filled-text) !important;
}

/* Navigation links - text color only, no background fill */
body.a11y-theme-cream .nav-links a {
  color: var(--color-Primary-500) !important;
}

body.a11y-theme-cream .nav-links a:hover {
  color: var(--color-Primary-600) !important;
}

/* ============================================
   GLOBAL MEDIA FILTERS
   ============================================
   Apply token-driven filters to images/video.
   Use data-keep-colour or .no-theme-filter to opt-out */

/* Apply media filters globally (uses tokens set per-theme) */
/* Excludes: icons, logos, and elements with opt-out attributes/classes */
:where(img, picture > img, video):not([data-keep-colour]):not(.no-theme-filter):not(.keep-colour):not([class*="icon"]):not([src*="/icons/"]):not([src*="/Icons/phosphor/"]):not(.side-tab__static-icon) {
  filter: brightness(var(--media-brightness))
          saturate(var(--media-saturation))
          contrast(var(--media-contrast));
}

/* Dark mode: apply brightness filter with higher specificity */
body.a11y-theme-dark img:not([data-keep-colour]):not(.no-theme-filter):not(.keep-colour):not([class*="icon"]):not([src*="/icons/"]):not([src*="/Icons/phosphor/"]):not(.side-tab__static-icon),
body.a11y-theme-dark picture > img:not([data-keep-colour]):not(.no-theme-filter):not(.keep-colour):not([class*="icon"]):not([src*="/icons/"]):not([src*="/Icons/phosphor/"]):not(.side-tab__static-icon),
body.a11y-theme-dark video:not([data-keep-colour]):not(.no-theme-filter):not(.keep-colour) {
  filter: brightness(0.86) saturate(0.90) contrast(0.98);
}

/* Dark mode: subtle background for transparent PNGs (excludes icons) */
body.a11y-theme-dark img:not([data-keep-colour]):not(.no-theme-filter):not([class*="icon"]):not([src*="/icons/"]):not([src*="/Icons/phosphor/"]):not(.side-tab__static-icon),
body.a11y-theme-dark picture > img:not([data-keep-colour]):not(.no-theme-filter):not([class*="icon"]):not([src*="/icons/"]):not([src*="/Icons/phosphor/"]):not(.side-tab__static-icon) {
  background: color-mix(in srgb, var(--color-Background-100) 70%, transparent);
}

/* ============================================
   CREAM THEME - Sepia filter for warm aesthetic
   ============================================ */
body.a11y-theme-cream :where(img, picture, video, canvas):not([data-keep-colour]):not(.no-theme-filter):not(.keep-colour):not([class*="icon"]):not([src*="/icons/"]):not([src*="/Icons/phosphor/"]):not(.side-tab__static-icon):not(.cart-icon__static) {
  filter: sepia(0.25) saturate(0.9) brightness(1.02) !important;
}

/* ============================================
   MONOCHROME - Media grayscale filter
   ============================================ */
body.a11y-theme-monochrome :where(img, picture, video, canvas, svg):not([data-keep-colour]):not(.no-theme-filter),
body.a11y-cvd-monochrome :where(img, picture, video, canvas, svg):not([data-keep-colour]):not(.no-theme-filter) {
  filter: grayscale(1) saturate(0) contrast(1.05) !important;
}

/* Opt-out: Keep specific elements in colour */
[data-keep-colour],
.no-theme-filter,
.keep-colour {
  filter: none !important;
}
